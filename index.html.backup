<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸŽ¯ Speaking Coach Pro - AI Powered</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;600;700;800&display=swap');

        body {
            font-family: 'Noto Sans Thai', sans-serif;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .timer-display {
            font-family: 'Courier New', monospace;
            font-size: 3.5rem;
            font-weight: bold;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        @keyframes pulse-ring {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            100% {
                transform: scale(1.5);
                opacity: 0;
            }
        }

        .recording-indicator {
            position: relative;
        }

        .recording-indicator::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background: #ef4444;
            border-radius: 50%;
            animation: pulse-ring 1.5s infinite;
        }

        .ai-badge {
            background: linear-gradient(135deg, #a78bfa 0%, #ec4899 100%);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.8;
            }
        }

        .achievement-pop {
            animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes popIn {
            0% {
                transform: scale(0);
                opacity: 0;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
</head>

<body class="gradient-bg min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸«à¸¥à¸±à¸à¸ªà¸¹à¸•à¸£ (à¹€à¸«à¸¡à¸·à¸­à¸™à¹€à¸”à¸´à¸¡ à¹à¸•à¹ˆà¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡ AI criteria)
        const TRAINING_DATA = {
            week1: {
                name: "SURVIVAL MODE",
                goal: "à¹à¸à¹‰ Dead Air + à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸§à¸²à¸¡à¸„à¸¥à¹ˆà¸­à¸‡",
                aiCriteria: {
                    fluency: 40,
                    clarity: 30,
                    structure: 10,
                    engagement: 20
                },
                powerWords: [
                    {
                        day: 1, words: [
                            { word: "à¸à¸£à¸­à¸šà¸„à¸§à¸²à¸¡à¸„à¸´à¸”", meaning: "à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸à¸²à¸£à¸„à¸´à¸”/à¹à¸™à¸§à¸—à¸²à¸‡", example: "à¸à¸£à¸­à¸šà¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¸—à¸µà¹ˆà¸œà¸¡à¹ƒà¸Šà¹‰à¸„à¸·à¸­..." },
                            { word: "à¸¡à¸¸à¸¡à¸¡à¸­à¸‡", meaning: "à¸—à¸±à¸¨à¸™à¸„à¸•à¸´/à¸¡à¸¸à¸¡à¸¡à¸­à¸‡à¹ƒà¸™à¸à¸²à¸£à¸¡à¸­à¸‡à¸ªà¸´à¹ˆà¸‡à¸•à¹ˆà¸²à¸‡à¹†", example: "à¸–à¹‰à¸²à¸¡à¸­à¸‡à¹ƒà¸™à¸¡à¸¸à¸¡à¸¡à¸­à¸‡à¸­à¸·à¹ˆà¸™ à¸­à¸²à¸ˆà¹€à¸«à¹‡à¸™à¸§à¹ˆà¸²..." },
                            { word: "à¸šà¸£à¸´à¸šà¸—", meaning: "à¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œà¹‚à¸”à¸¢à¸£à¸­à¸š", example: "à¹ƒà¸™à¸šà¸£à¸´à¸šà¸—à¸‚à¸­à¸‡à¸ªà¸±à¸‡à¸„à¸¡à¹„à¸—à¸¢..." }
                        ]
                    },
                    {
                        day: 2, words: [
                            { word: "à¸à¸£à¸­à¸šà¸„à¸§à¸²à¸¡à¸„à¸´à¸”", meaning: "à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸à¸²à¸£à¸„à¸´à¸”/à¹à¸™à¸§à¸—à¸²à¸‡", example: "à¸à¸£à¸­à¸šà¸„à¸§à¸²à¸¡à¸„à¸´à¸”à¸—à¸µà¹ˆà¸œà¸¡à¹ƒà¸Šà¹‰à¸„à¸·à¸­..." },
                            { word: "à¸¡à¸¸à¸¡à¸¡à¸­à¸‡", meaning: "à¸—à¸±à¸¨à¸™à¸„à¸•à¸´/à¸¡à¸¸à¸¡à¸¡à¸­à¸‡à¹ƒà¸™à¸à¸²à¸£à¸¡à¸­à¸‡à¸ªà¸´à¹ˆà¸‡à¸•à¹ˆà¸²à¸‡à¹†", example: "à¸–à¹‰à¸²à¸¡à¸­à¸‡à¹ƒà¸™à¸¡à¸¸à¸¡à¸¡à¸­à¸‡à¸­à¸·à¹ˆà¸™ à¸­à¸²à¸ˆà¹€à¸«à¹‡à¸™à¸§à¹ˆà¸²..." },
                            { word: "à¸šà¸£à¸´à¸šà¸—", meaning: "à¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œà¹‚à¸”à¸¢à¸£à¸­à¸š", example: "à¹ƒà¸™à¸šà¸£à¸´à¸šà¸—à¸‚à¸­à¸‡à¸ªà¸±à¸‡à¸„à¸¡à¹„à¸—à¸¢..." }
                        ]
                    },
                    {
                        day: 3, words: [
                            { word: "à¸«à¸¥à¸±à¸à¸à¸²à¸£", meaning: "à¸—à¸¤à¸©à¸Žà¸µà¸žà¸·à¹‰à¸™à¸à¸²à¸™", example: "à¸«à¸¥à¸±à¸à¸à¸²à¸£à¸ªà¸³à¸„à¸±à¸à¸„à¸·à¸­..." },
                            { word: "à¹à¸à¹ˆà¸™à¹à¸—à¹‰", meaning: "à¸ªà¸²à¸£à¸°à¸ªà¸³à¸„à¸±à¸", example: "à¹à¸à¹ˆà¸™à¹à¸—à¹‰à¸‚à¸­à¸‡à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸™à¸µà¹‰à¸„à¸·à¸­..." },
                            { word: "à¸™à¸±à¸¢à¸ªà¸³à¸„à¸±à¸", meaning: "à¸œà¸¥à¸à¸£à¸°à¸—à¸šà¸—à¸µà¹ˆà¸•à¸²à¸¡à¸¡à¸²", example: "à¸™à¸±à¸¢à¸ªà¸³à¸„à¸±à¸à¸‚à¸­à¸‡à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸™à¸µà¹‰à¸„à¸·à¸­..." }
                        ]
                    },
                    {
                        day: 4, words: [
                            { word: "à¸«à¸¥à¸±à¸à¸à¸²à¸£", meaning: "à¸—à¸¤à¸©à¸Žà¸µà¸žà¸·à¹‰à¸™à¸à¸²à¸™", example: "à¸«à¸¥à¸±à¸à¸à¸²à¸£à¸ªà¸³à¸„à¸±à¸à¸„à¸·à¸­..." },
                            { word: "à¹à¸à¹ˆà¸™à¹à¸—à¹‰", meaning: "à¸ªà¸²à¸£à¸°à¸ªà¸³à¸„à¸±à¸", example: "à¹à¸à¹ˆà¸™à¹à¸—à¹‰à¸‚à¸­à¸‡à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸™à¸µà¹‰à¸„à¸·à¸­..." },
                            { word: "à¸™à¸±à¸¢à¸ªà¸³à¸„à¸±à¸", meaning: "à¸œà¸¥à¸à¸£à¸°à¸—à¸šà¸—à¸µà¹ˆà¸•à¸²à¸¡à¸¡à¸²", example: "à¸™à¸±à¸¢à¸ªà¸³à¸„à¸±à¸à¸‚à¸­à¸‡à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸™à¸µà¹‰à¸„à¸·à¸­..." }
                        ]
                    },
                    {
                        day: 5, words: [
                            { word: "à¸à¸¥à¹„à¸", meaning: "à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™", example: "à¸à¸¥à¹„à¸à¸—à¸µà¹ˆà¸—à¸³à¹ƒà¸«à¹‰à¹€à¸à¸´à¸”à¸„à¸·à¸­..." },
                            { word: "à¸›à¸±à¸ˆà¸ˆà¸±à¸¢", meaning: "à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸¡à¸µà¸œà¸¥à¸•à¹ˆà¸­", example: "à¸›à¸±à¸ˆà¸ˆà¸±à¸¢à¸ªà¸³à¸„à¸±à¸à¸¡à¸µ 3 à¸‚à¹‰à¸­..." },
                            { word: "à¹à¸™à¸§à¹‚à¸™à¹‰à¸¡", meaning: "à¸—à¸´à¸¨à¸—à¸²à¸‡à¹ƒà¸™à¸­à¸™à¸²à¸„à¸•", example: "à¹à¸™à¸§à¹‚à¸™à¹‰à¸¡à¸—à¸µà¹ˆà¸™à¹ˆà¸²à¸ªà¸™à¹ƒà¸ˆà¸„à¸·à¸­..." }
                        ]
                    },
                    {
                        day: 6, words: [
                            { word: "à¸à¸¥à¹„à¸", meaning: "à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™", example: "à¸à¸¥à¹„à¸à¸—à¸µà¹ˆà¸—à¸³à¹ƒà¸«à¹‰à¹€à¸à¸´à¸”à¸„à¸·à¸­..." },
                            { word: "à¸›à¸±à¸ˆà¸ˆà¸±à¸¢", meaning: "à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸¡à¸µà¸œà¸¥à¸•à¹ˆà¸­", example: "à¸›à¸±à¸ˆà¸ˆà¸±à¸¢à¸ªà¸³à¸„à¸±à¸à¸¡à¸µ 3 à¸‚à¹‰à¸­..." },
                            { word: "à¹à¸™à¸§à¹‚à¸™à¹‰à¸¡", meaning: "à¸—à¸´à¸¨à¸—à¸²à¸‡à¹ƒà¸™à¸­à¸™à¸²à¸„à¸•", example: "à¹à¸™à¸§à¹‚à¸™à¹‰à¸¡à¸—à¸µà¹ˆà¸™à¹ˆà¸²à¸ªà¸™à¹ƒà¸ˆà¸„à¸·à¸­..." }
                        ]
                    },
                    {
                        day: 7, words: [
                            { word: "à¸à¸¥à¹„à¸", meaning: "à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™", example: "à¸à¸¥à¹„à¸à¸—à¸µà¹ˆà¸—à¸³à¹ƒà¸«à¹‰à¹€à¸à¸´à¸”à¸„à¸·à¸­..." },
                            { word: "à¸›à¸±à¸ˆà¸ˆà¸±à¸¢", meaning: "à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸¡à¸µà¸œà¸¥à¸•à¹ˆà¸­", example: "à¸›à¸±à¸ˆà¸ˆà¸±à¸¢à¸ªà¸³à¸„à¸±à¸à¸¡à¸µ 3 à¸‚à¹‰à¸­..." },
                            { word: "à¹à¸™à¸§à¹‚à¸™à¹‰à¸¡", meaning: "à¸—à¸´à¸¨à¸—à¸²à¸‡à¹ƒà¸™à¸­à¸™à¸²à¸„à¸•", example: "à¹à¸™à¸§à¹‚à¸™à¹‰à¸¡à¸—à¸µà¹ˆà¸™à¹ˆà¸²à¸ªà¸™à¹ƒà¸ˆà¸„à¸·à¸­..." }
                        ]
                    }
                ],
                topics: [
                    { day: 1, title: "Mirror Talk", desc: "à¹à¸™à¸°à¸™à¸³à¸•à¸±à¸§à¹€à¸­à¸‡ 1 à¸™à¸²à¸—à¸µ à¹„à¸¡à¹ˆà¸«à¸¢à¸¸à¸”", duration: 1, type: "basic" },
                    { day: 2, title: "Mirror Talk", desc: "à¹à¸™à¸°à¸™à¸³à¸•à¸±à¸§à¹€à¸­à¸‡ 1 à¸™à¸²à¸—à¸µ à¹„à¸¡à¹ˆà¸«à¸¢à¸¸à¸”", duration: 1, type: "basic" },
                    { day: 3, title: "Object Description", desc: "à¸­à¸˜à¸´à¸šà¸²à¸¢à¸‚à¸­à¸‡à¹ƒà¸™à¸¡à¸·à¸­ 2 à¸™à¸²à¸—à¸µ", duration: 2, type: "basic" },
                    { day: 4, title: "Object Description", desc: "à¸­à¸˜à¸´à¸šà¸²à¸¢à¸‚à¸­à¸‡à¹ƒà¸™à¸¡à¸·à¸­ 2 à¸™à¸²à¸—à¸µ", duration: 2, type: "basic" },
                    { day: 5, title: "Free Flow", desc: "à¸žà¸¹à¸”à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸­à¸°à¹„à¸£à¸à¹‡à¹„à¸”à¹‰ 2 à¸™à¸²à¸—à¸µ", duration: 2, type: "challenge" },
                    { day: 6, title: "Phone Recording", desc: "à¸­à¸±à¸”à¹€à¸ªà¸µà¸¢à¸‡ à¸žà¸¹à¸”à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸§à¸±à¸™à¸™à¸µà¹‰ 2 à¸™à¸²à¸—à¸µ", duration: 2, type: "challenge" },
                    { day: 7, title: "MINI CHALLENGE", desc: "à¸«à¸™à¹‰à¸²à¸à¸¥à¹‰à¸­à¸‡: à¸—à¸³à¹„à¸¡à¸‰à¸±à¸™à¸­à¸¢à¸²à¸à¹€à¸à¹ˆà¸‡à¸žà¸¹à¸”", duration: 2, type: "challenge" }
                ]
            },
            week2: {
                name: "STRUCTURE MODE",
                goal: "à¸žà¸¹à¸”à¹à¸šà¸šà¸¡à¸µà¸£à¸°à¸šà¸š à¹ƒà¸Šà¹‰ Framework",
                aiCriteria: {
                    fluency: 25,
                    clarity: 25,
                    structure: 35,
                    engagement: 15
                },
                powerWords: [
                    {
                        day: 8, words: [
                            { word: "First Principles", meaning: "à¸„à¸´à¸”à¸ˆà¸²à¸à¸«à¸¥à¸±à¸à¸à¸²à¸£à¸žà¸·à¹‰à¸™à¸à¸²à¸™", example: "à¸–à¹‰à¸²à¸„à¸´à¸”à¸•à¸²à¸¡ First Principles..." },
                            { word: "Trade-off", meaning: "à¹à¸¥à¸à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ à¹„à¸”à¹‰à¸­à¸¢à¹ˆà¸²à¸‡à¹€à¸ªà¸µà¸¢à¸­à¸¢à¹ˆà¸²à¸‡", example: "Trade-off à¸‚à¸­à¸‡à¸à¸²à¸£à¹€à¸¥à¸·à¸­à¸à¸™à¸µà¹‰à¸„à¸·à¸­..." },
                            { word: "Second-Order Effect", meaning: "à¸œà¸¥à¸à¸£à¸°à¸—à¸šà¸£à¸°à¸”à¸±à¸š 2-3", example: "à¸œà¸¥à¸à¸£à¸°à¸—à¸šà¸£à¸°à¸”à¸±à¸šà¸—à¸µà¹ˆà¸ªà¸­à¸‡à¸„à¸·à¸­..." }
                        ]
                    },
                    {
                        day: 9, words: [
                            { word: "First Principles", meaning: "à¸„à¸´à¸”à¸ˆà¸²à¸à¸«à¸¥à¸±à¸à¸à¸²à¸£à¸žà¸·à¹‰à¸™à¸à¸²à¸™", example: "à¸–à¹‰à¸²à¸„à¸´à¸”à¸•à¸²à¸¡ First Principles..." },
                            { word: "Trade-off", meaning: "à¹à¸¥à¸à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ à¹„à¸”à¹‰à¸­à¸¢à¹ˆà¸²à¸‡à¹€à¸ªà¸µà¸¢à¸­à¸¢à¹ˆà¸²à¸‡", example: "Trade-off à¸‚à¸­à¸‡à¸à¸²à¸£à¹€à¸¥à¸·à¸­à¸à¸™à¸µà¹‰à¸„à¸·à¸­..." },
                            { word: "Second-Order Effect", meaning: "à¸œà¸¥à¸à¸£à¸°à¸—à¸šà¸£à¸°à¸”à¸±à¸š 2-3", example: "à¸œà¸¥à¸à¸£à¸°à¸—à¸šà¸£à¸°à¸”à¸±à¸šà¸—à¸µà¹ˆà¸ªà¸­à¸‡à¸„à¸·à¸­..." }
                        ]
                    },
                    {
                        day: 10, words: [
                            { word: "First Principles", meaning: "à¸„à¸´à¸”à¸ˆà¸²à¸à¸«à¸¥à¸±à¸à¸à¸²à¸£à¸žà¸·à¹‰à¸™à¸à¸²à¸™", example: "à¸–à¹‰à¸²à¸„à¸´à¸”à¸•à¸²à¸¡ First Principles..." },
                            { word: "Trade-off", meaning: "à¹à¸¥à¸à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ à¹„à¸”à¹‰à¸­à¸¢à¹ˆà¸²à¸‡à¹€à¸ªà¸µà¸¢à¸­à¸¢à¹ˆà¸²à¸‡", example: "Trade-off à¸‚à¸­à¸‡à¸à¸²à¸£à¹€à¸¥à¸·à¸­à¸à¸™à¸µà¹‰à¸„à¸·à¸­..." },
                            { word: "Second-Order Effect", meaning: "à¸œà¸¥à¸à¸£à¸°à¸—à¸šà¸£à¸°à¸”à¸±à¸š 2-3", example: "à¸œà¸¥à¸à¸£à¸°à¸—à¸šà¸£à¸°à¸”à¸±à¸šà¸—à¸µà¹ˆà¸ªà¸­à¸‡à¸„à¸·à¸­..." }
                        ]
                    },
                    {
                        day: 11, words: [
                            { word: "Feedback Loop", meaning: "à¸§à¸‡à¸ˆà¸£à¸¢à¹‰à¸­à¸™à¸à¸¥à¸±à¸š", example: "à¸™à¸µà¹ˆà¸„à¸·à¸­ Feedback Loop à¸—à¸µà¹ˆ..." },
                            { word: "Asymmetry", meaning: "à¸„à¸§à¸²à¸¡à¹„à¸¡à¹ˆà¸ªà¸¡à¸”à¸¸à¸¥", example: "à¸„à¸§à¸²à¸¡à¹„à¸¡à¹ˆà¸ªà¸¡à¸”à¸¸à¸¥à¸—à¸µà¹ˆà¹€à¸«à¹‡à¸™à¹„à¸”à¹‰à¸Šà¸±à¸”à¸„à¸·à¸­..." },
                            { word: "Leverage", meaning: "à¸„à¸±à¸™à¹‚à¸¢à¸/à¸ˆà¸¸à¸”à¸—à¸£à¸‡à¸žà¸¥à¸±à¸‡", example: "Leverage point à¸—à¸µà¹ˆà¸ªà¸³à¸„à¸±à¸à¸„à¸·à¸­..." }
                        ]
                    },
                    {
                        day: 12, words: [
                            { word: "Feedback Loop", meaning: "à¸§à¸‡à¸ˆà¸£à¸¢à¹‰à¸­à¸™à¸à¸¥à¸±à¸š", example: "à¸™à¸µà¹ˆà¸„à¸·à¸­ Feedback Loop à¸—à¸µà¹ˆ..." },
                            { word: "Asymmetry", meaning: "à¸„à¸§à¸²à¸¡à¹„à¸¡à¹ˆà¸ªà¸¡à¸”à¸¸à¸¥", example: "à¸„à¸§à¸²à¸¡à¹„à¸¡à¹ˆà¸ªà¸¡à¸”à¸¸à¸¥à¸—à¸µà¹ˆà¹€à¸«à¹‡à¸™à¹„à¸”à¹‰à¸Šà¸±à¸”à¸„à¸·à¸­..." },
                            { word: "Leverage", meaning: "à¸„à¸±à¸™à¹‚à¸¢à¸/à¸ˆà¸¸à¸”à¸—à¸£à¸‡à¸žà¸¥à¸±à¸‡", example: "Leverage point à¸—à¸µà¹ˆà¸ªà¸³à¸„à¸±à¸à¸„à¸·à¸­..." }
                        ]
                    },
                    {
                        day: 13, words: [
                            { word: "Feedback Loop", meaning: "à¸§à¸‡à¸ˆà¸£à¸¢à¹‰à¸­à¸™à¸à¸¥à¸±à¸š", example: "à¸™à¸µà¹ˆà¸„à¸·à¸­ Feedback Loop à¸—à¸µà¹ˆ..." },
                            { word: "Asymmetry", meaning: "à¸„à¸§à¸²à¸¡à¹„à¸¡à¹ˆà¸ªà¸¡à¸”à¸¸à¸¥", example: "à¸„à¸§à¸²à¸¡à¹„à¸¡à¹ˆà¸ªà¸¡à¸”à¸¸à¸¥à¸—à¸µà¹ˆà¹€à¸«à¹‡à¸™à¹„à¸”à¹‰à¸Šà¸±à¸”à¸„à¸·à¸­..." },
                            { word: "Leverage", meaning: "à¸„à¸±à¸™à¹‚à¸¢à¸/à¸ˆà¸¸à¸”à¸—à¸£à¸‡à¸žà¸¥à¸±à¸‡", example: "Leverage point à¸—à¸µà¹ˆà¸ªà¸³à¸„à¸±à¸à¸„à¸·à¸­..." }
                        ]
                    },
                    {
                        day: 14, words: [
                            { word: "Feedback Loop", meaning: "à¸§à¸‡à¸ˆà¸£à¸¢à¹‰à¸­à¸™à¸à¸¥à¸±à¸š", example: "à¸™à¸µà¹ˆà¸„à¸·à¸­ Feedback Loop à¸—à¸µà¹ˆ..." },
                            { word: "Asymmetry", meaning: "à¸„à¸§à¸²à¸¡à¹„à¸¡à¹ˆà¸ªà¸¡à¸”à¸¸à¸¥", example: "à¸„à¸§à¸²à¸¡à¹„à¸¡à¹ˆà¸ªà¸¡à¸”à¸¸à¸¥à¸—à¸µà¹ˆà¹€à¸«à¹‡à¸™à¹„à¸”à¹‰à¸Šà¸±à¸”à¸„à¸·à¸­..." },
                            { word: "Leverage", meaning: "à¸„à¸±à¸™à¹‚à¸¢à¸/à¸ˆà¸¸à¸”à¸—à¸£à¸‡à¸žà¸¥à¸±à¸‡", example: "Leverage point à¸—à¸µà¹ˆà¸ªà¸³à¸„à¸±à¸à¸„à¸·à¸­..." }
                        ]
                    }
                ],
                topics: [
                    { day: 8, title: "PREP: à¸—à¸³à¹„à¸¡à¸„à¸™à¸„à¸§à¸£à¸­à¸­à¸à¸à¸³à¸¥à¸±à¸‡à¸à¸²à¸¢", desc: "à¹ƒà¸Šà¹‰ PREP Framework", duration: 3, framework: "PREP" },
                    { day: 9, title: "PREP: à¸—à¸³à¹„à¸¡à¸„à¸§à¸£à¸­à¹ˆà¸²à¸™à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­", desc: "à¹ƒà¸Šà¹‰ PREP Framework", duration: 3, framework: "PREP" },
                    { day: 10, title: "3-Act: à¸›à¸£à¸°à¸ªà¸šà¸à¸²à¸£à¸“à¹Œà¸—à¸µà¹ˆà¸—à¸³à¹ƒà¸«à¹‰à¸„à¸¸à¸“à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™", desc: "à¹ƒà¸Šà¹‰ 3-Act Structure", duration: 3, framework: "3-Act" },
                    { day: 11, title: "3-Act: à¸„à¸§à¸²à¸¡à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¸—à¸µà¹ˆà¹ƒà¸«à¸à¹ˆà¸—à¸µà¹ˆà¸ªà¸¸à¸”", desc: "à¹ƒà¸Šà¹‰ 3-Act Structure", duration: 3, framework: "3-Act" },
                    { day: 12, title: "SBI: à¸›à¸±à¸à¸«à¸²à¸—à¸µà¹ˆà¹€à¸ˆà¸­ + à¸§à¸´à¸˜à¸µà¹à¸à¹‰", desc: "à¹ƒà¸Šà¹‰ SBI Framework", duration: 3, framework: "SBI" },
                    { day: 13, title: "SBI: à¹‚à¸›à¸£à¹€à¸ˆà¸à¸•à¹Œà¸—à¸µà¹ˆà¸ à¸¹à¸¡à¸´à¹ƒà¸ˆ", desc: "à¹ƒà¸Šà¹‰ SBI Framework", duration: 3, framework: "SBI" },
                    { day: 14, title: "WEEKLY CHALLENGE", desc: "à¸žà¸¹à¸” 3 à¸™à¸²à¸—à¸µ à¹ƒà¸Šà¹‰ PREP", duration: 3, type: "challenge" }
                ]
            },
            week3: {
                name: "STORYTELLING MODE",
                goal: "à¸—à¸³à¹ƒà¸«à¹‰à¸„à¸™à¸­à¸¢à¸²à¸à¸Ÿà¸±à¸‡ à¸¡à¸µà¸­à¸²à¸£à¸¡à¸“à¹Œ",
                aiCriteria: {
                    fluency: 20,
                    clarity: 20,
                    structure: 25,
                    engagement: 35
                },
                powerWords: [
                    {
                        day: 15, words: [
                            { word: "à¸¢à¹‰à¸­à¸™à¸à¸¥à¸±à¸šà¹„à¸›...", meaning: "à¹€à¸£à¸´à¹ˆà¸¡à¹€à¸¥à¹ˆà¸²à¹€à¸£à¸·à¹ˆà¸­à¸‡", example: "à¸¢à¹‰à¸­à¸™à¸à¸¥à¸±à¸šà¹„à¸›à¹€à¸¡à¸·à¹ˆà¸­ 5 à¸›à¸µà¸à¹ˆà¸­à¸™..." },
                            { word: "à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸™à¹ˆà¸²à¸ªà¸™à¹ƒà¸ˆà¸„à¸·à¸­...", meaning: "à¸”à¸¶à¸‡à¸”à¸¹à¸”à¸„à¸§à¸²à¸¡à¸ªà¸™à¹ƒà¸ˆ", example: "à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸™à¹ˆà¸²à¸ªà¸™à¹ƒà¸ˆà¸„à¸·à¸­à¸œà¸¡à¹„à¸¡à¹ˆà¸„à¸´à¸”à¸§à¹ˆà¸²..." },
                            { word: "à¸—à¸µà¹ˆà¹à¸›à¸¥à¸à¸„à¸·à¸­...", meaning: "à¸ªà¸£à¹‰à¸²à¸‡ Curiosity", example: "à¸—à¸µà¹ˆà¹à¸›à¸¥à¸à¸„à¸·à¸­à¸—à¸¸à¸à¸„à¸™à¸„à¸´à¸”à¸§à¹ˆà¸²..." }
                        ]
                    },
                    {
                        day: 16, words: [
                            { word: "à¸¢à¹‰à¸­à¸™à¸à¸¥à¸±à¸šà¹„à¸›...", meaning: "à¹€à¸£à¸´à¹ˆà¸¡à¹€à¸¥à¹ˆà¸²à¹€à¸£à¸·à¹ˆà¸­à¸‡", example: "à¸¢à¹‰à¸­à¸™à¸à¸¥à¸±à¸šà¹„à¸›à¹€à¸¡à¸·à¹ˆà¸­ 5 à¸›à¸µà¸à¹ˆà¸­à¸™..." },
                            { word: "à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸™à¹ˆà¸²à¸ªà¸™à¹ƒà¸ˆà¸„à¸·à¸­...", meaning: "à¸”à¸¶à¸‡à¸”à¸¹à¸”à¸„à¸§à¸²à¸¡à¸ªà¸™à¹ƒà¸ˆ", example: "à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸™à¹ˆà¸²à¸ªà¸™à¹ƒà¸ˆà¸„à¸·à¸­à¸œà¸¡à¹„à¸¡à¹ˆà¸„à¸´à¸”à¸§à¹ˆà¸²..." },
                            { word: "à¸—à¸µà¹ˆà¹à¸›à¸¥à¸à¸„à¸·à¸­...", meaning: "à¸ªà¸£à¹‰à¸²à¸‡ Curiosity", example: "à¸—à¸µà¹ˆà¹à¸›à¸¥à¸à¸„à¸·à¸­à¸—à¸¸à¸à¸„à¸™à¸„à¸´à¸”à¸§à¹ˆà¸²..." }
                        ]
                    },
                    {
                        day: 17, words: [
                            { word: "à¸¢à¹‰à¸­à¸™à¸à¸¥à¸±à¸šà¹„à¸›...", meaning: "à¹€à¸£à¸´à¹ˆà¸¡à¹€à¸¥à¹ˆà¸²à¹€à¸£à¸·à¹ˆà¸­à¸‡", example: "à¸¢à¹‰à¸­à¸™à¸à¸¥à¸±à¸šà¹„à¸›à¹€à¸¡à¸·à¹ˆà¸­ 5 à¸›à¸µà¸à¹ˆà¸­à¸™..." },
                            { word: "à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸™à¹ˆà¸²à¸ªà¸™à¹ƒà¸ˆà¸„à¸·à¸­...", meaning: "à¸”à¸¶à¸‡à¸”à¸¹à¸”à¸„à¸§à¸²à¸¡à¸ªà¸™à¹ƒà¸ˆ", example: "à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸™à¹ˆà¸²à¸ªà¸™à¹ƒà¸ˆà¸„à¸·à¸­à¸œà¸¡à¹„à¸¡à¹ˆà¸„à¸´à¸”à¸§à¹ˆà¸²..." },
                            { word: "à¸—à¸µà¹ˆà¹à¸›à¸¥à¸à¸„à¸·à¸­...", meaning: "à¸ªà¸£à¹‰à¸²à¸‡ Curiosity", example: "à¸—à¸µà¹ˆà¹à¸›à¸¥à¸à¸„à¸·à¸­à¸—à¸¸à¸à¸„à¸™à¸„à¸´à¸”à¸§à¹ˆà¸²..." }
                        ]
                    },
                    {
                        day: 18, words: [
                            { word: "à¸–à¹‰à¸²à¹ƒà¸«à¹‰à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸š...", meaning: "à¹ƒà¸Šà¹‰ Metaphor", example: "à¸–à¹‰à¸²à¹ƒà¸«à¹‰à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸šà¸à¹‡à¹€à¸«à¸¡à¸·à¸­à¸™..." },
                            { word: "à¸›à¸£à¸°à¹€à¸”à¹‡à¸™à¸à¹‡à¸„à¸·à¸­...", meaning: "à¹„à¸›à¸«à¸²à¸ˆà¸¸à¸”à¸ªà¸³à¸„à¸±à¸", example: "à¸›à¸£à¸°à¹€à¸”à¹‡à¸™à¸à¹‡à¸„à¸·à¸­à¹€à¸£à¸²à¸•à¹‰à¸­à¸‡..." },
                            { word: "à¹à¸•à¹ˆà¸„à¸§à¸²à¸¡à¸ˆà¸£à¸´à¸‡à¸„à¸·à¸­...", meaning: "Plot Twist", example: "à¹à¸•à¹ˆà¸„à¸§à¸²à¸¡à¸ˆà¸£à¸´à¸‡à¸„à¸·à¸­à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆà¸­à¸¢à¹ˆà¸²à¸‡à¸™à¸±à¹‰à¸™..." }
                        ]
                    },
                    {
                        day: 19, words: [
                            { word: "à¸–à¹‰à¸²à¹ƒà¸«à¹‰à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸š...", meaning: "à¹ƒà¸Šà¹‰ Metaphor", example: "à¸–à¹‰à¸²à¹ƒà¸«à¹‰à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸šà¸à¹‡à¹€à¸«à¸¡à¸·à¸­à¸™..." },
                            { word: "à¸›à¸£à¸°à¹€à¸”à¹‡à¸™à¸à¹‡à¸„à¸·à¸­...", meaning: "à¹„à¸›à¸«à¸²à¸ˆà¸¸à¸”à¸ªà¸³à¸„à¸±à¸", example: "à¸›à¸£à¸°à¹€à¸”à¹‡à¸™à¸à¹‡à¸„à¸·à¸­à¹€à¸£à¸²à¸•à¹‰à¸­à¸‡..." },
                            { word: "à¹à¸•à¹ˆà¸„à¸§à¸²à¸¡à¸ˆà¸£à¸´à¸‡à¸„à¸·à¸­...", meaning: "Plot Twist", example: "à¹à¸•à¹ˆà¸„à¸§à¸²à¸¡à¸ˆà¸£à¸´à¸‡à¸„à¸·à¸­à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆà¸­à¸¢à¹ˆà¸²à¸‡à¸™à¸±à¹‰à¸™..." }
                        ]
                    },
                    {
                        day: 20, words: [
                            { word: "à¸–à¹‰à¸²à¹ƒà¸«à¹‰à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸š...", meaning: "à¹ƒà¸Šà¹‰ Metaphor", example: "à¸–à¹‰à¸²à¹ƒà¸«à¹‰à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸šà¸à¹‡à¹€à¸«à¸¡à¸·à¸­à¸™..." },
                            { word: "à¸›à¸£à¸°à¹€à¸”à¹‡à¸™à¸à¹‡à¸„à¸·à¸­...", meaning: "à¹„à¸›à¸«à¸²à¸ˆà¸¸à¸”à¸ªà¸³à¸„à¸±à¸", example: "à¸›à¸£à¸°à¹€à¸”à¹‡à¸™à¸à¹‡à¸„à¸·à¸­à¹€à¸£à¸²à¸•à¹‰à¸­à¸‡..." },
                            { word: "à¹à¸•à¹ˆà¸„à¸§à¸²à¸¡à¸ˆà¸£à¸´à¸‡à¸„à¸·à¸­...", meaning: "Plot Twist", example: "à¹à¸•à¹ˆà¸„à¸§à¸²à¸¡à¸ˆà¸£à¸´à¸‡à¸„à¸·à¸­à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆà¸­à¸¢à¹ˆà¸²à¸‡à¸™à¸±à¹‰à¸™..." }
                        ]
                    },
                    {
                        day: 21, words: [
                            { word: "à¸–à¹‰à¸²à¹ƒà¸«à¹‰à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸š...", meaning: "à¹ƒà¸Šà¹‰ Metaphor", example: "à¸–à¹‰à¸²à¹ƒà¸«à¹‰à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸šà¸à¹‡à¹€à¸«à¸¡à¸·à¸­à¸™..." },
                            { word: "à¸›à¸£à¸°à¹€à¸”à¹‡à¸™à¸à¹‡à¸„à¸·à¸­...", meaning: "à¹„à¸›à¸«à¸²à¸ˆà¸¸à¸”à¸ªà¸³à¸„à¸±à¸", example: "à¸›à¸£à¸°à¹€à¸”à¹‡à¸™à¸à¹‡à¸„à¸·à¸­à¹€à¸£à¸²à¸•à¹‰à¸­à¸‡..." },
                            { word: "à¹à¸•à¹ˆà¸„à¸§à¸²à¸¡à¸ˆà¸£à¸´à¸‡à¸„à¸·à¸­...", meaning: "Plot Twist", example: "à¹à¸•à¹ˆà¸„à¸§à¸²à¸¡à¸ˆà¸£à¸´à¸‡à¸„à¸·à¸­à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆà¸­à¸¢à¹ˆà¸²à¸‡à¸™à¸±à¹‰à¸™..." }
                        ]
                    }
                ],
                topics: [
                    { day: 15, title: "Hook Practice", desc: "à¹€à¸›à¸´à¸”à¹€à¸£à¸·à¹ˆà¸­à¸‡à¹ƒà¸«à¹‰à¸›à¸±à¸‡: à¸Šà¸µà¸§à¸´à¸•à¸‚à¸­à¸‡à¸œà¸¡", duration: 3, technique: "Hook" },
                    { day: 16, title: "Hook Practice", desc: "à¹€à¸›à¸´à¸”à¹€à¸£à¸·à¹ˆà¸­à¸‡à¹ƒà¸«à¹‰à¸›à¸±à¸‡: à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸„à¸™à¹„à¸¡à¹ˆà¸£à¸¹à¹‰à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸šà¸œà¸¡", duration: 3, technique: "Hook" },
                    { day: 17, title: "Emotion: Excited", desc: "à¹€à¸¥à¹ˆà¸²à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸”à¹‰à¸§à¸¢à¸„à¸§à¸²à¸¡à¸•à¸·à¹ˆà¸™à¹€à¸•à¹‰à¸™", duration: 3, technique: "Emotion" },
                    { day: 18, title: "Emotion: Thoughtful", desc: "à¹€à¸¥à¹ˆà¸²à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸”à¹‰à¸§à¸¢à¸„à¸§à¸²à¸¡à¹ƒà¸„à¸£à¹ˆà¸„à¸´à¸”", duration: 3, technique: "Emotion" },
                    { day: 19, title: "Pause & Pace", desc: "à¹ƒà¸Šà¹‰à¸ˆà¸±à¸‡à¸«à¸§à¸°: à¸šà¸—à¹€à¸£à¸µà¸¢à¸™à¸ªà¸³à¸„à¸±à¸", duration: 4, technique: "Timing" },
                    { day: 20, title: "Pause & Pace", desc: "à¹ƒà¸Šà¹‰à¸ˆà¸±à¸‡à¸«à¸§à¸°: à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸—à¸µà¹ˆà¸£à¸¹à¹‰à¸ªà¸¶à¸à¸ à¸¹à¸¡à¸´à¹ƒà¸ˆ", duration: 4, technique: "Timing" },
                    { day: 21, title: "WEEKLY CHALLENGE", desc: "à¹€à¸¥à¹ˆà¸²à¹€à¸£à¸·à¹ˆà¸­à¸‡: à¸šà¸—à¹€à¸£à¸µà¸¢à¸™à¸Šà¸µà¸§à¸´à¸•", duration: 4, type: "challenge" }
                ]
            },
            week4: {
                name: "CHARISMA MODE",
                goal: "à¸¡à¸±à¹ˆà¸™à¹ƒà¸ˆ à¸¡à¸µà¸žà¸¥à¸±à¸‡ à¸žà¸£à¹‰à¸­à¸¡à¸¥à¸‡à¸„à¸­à¸™à¹€à¸—à¸™à¸•à¹Œà¸ˆà¸£à¸´à¸‡",
                aiCriteria: {
                    fluency: 20,
                    clarity: 20,
                    structure: 20,
                    engagement: 40
                },
                powerWords: [
                    {
                        day: 22, words: [
                            { word: "à¸„à¸¸à¸“à¹€à¸„à¸¢à¸ªà¸‡à¸ªà¸±à¸¢à¹„à¸«à¸¡à¸§à¹ˆà¸²...", meaning: "Rhetorical Question", example: "à¸„à¸¸à¸“à¹€à¸„à¸¢à¸ªà¸‡à¸ªà¸±à¸¢à¹„à¸«à¸¡à¸§à¹ˆà¸²à¸—à¸³à¹„à¸¡..." },
                            { word: "à¸¡à¸µ 3 à¸ªà¸´à¹ˆà¸‡...", meaning: "Power of Three", example: "à¸¡à¸µ 3 à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸ªà¸³à¸„à¸±à¸: 1) 2) 3)" },
                            { word: "à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆ... à¹à¸•à¹ˆà¹€à¸›à¹‡à¸™...", meaning: "Contrast", example: "à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆà¹€à¸£à¸·à¹ˆà¸­à¸‡à¸‚à¸­à¸‡... à¹à¸•à¹ˆà¹€à¸›à¹‡à¸™à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸‚à¸­à¸‡..." }
                        ]
                    },
                    {
                        day: 23, words: [
                            { word: "à¸„à¸¸à¸“à¹€à¸„à¸¢à¸ªà¸‡à¸ªà¸±à¸¢à¹„à¸«à¸¡à¸§à¹ˆà¸²...", meaning: "Rhetorical Question", example: "à¸„à¸¸à¸“à¹€à¸„à¸¢à¸ªà¸‡à¸ªà¸±à¸¢à¹„à¸«à¸¡à¸§à¹ˆà¸²à¸—à¸³à¹„à¸¡..." },
                            { word: "à¸¡à¸µ 3 à¸ªà¸´à¹ˆà¸‡...", meaning: "Power of Three", example: "à¸¡à¸µ 3 à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸ªà¸³à¸„à¸±à¸: 1) 2) 3)" },
                            { word: "à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆ... à¹à¸•à¹ˆà¹€à¸›à¹‡à¸™...", meaning: "Contrast", example: "à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆà¹€à¸£à¸·à¹ˆà¸­à¸‡à¸‚à¸­à¸‡... à¹à¸•à¹ˆà¹€à¸›à¹‡à¸™à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸‚à¸­à¸‡..." }
                        ]
                    },
                    {
                        day: 24, words: [
                            { word: "à¸„à¸¸à¸“à¹€à¸„à¸¢à¸ªà¸‡à¸ªà¸±à¸¢à¹„à¸«à¸¡à¸§à¹ˆà¸²...", meaning: "Rhetorical Question", example: "à¸„à¸¸à¸“à¹€à¸„à¸¢à¸ªà¸‡à¸ªà¸±à¸¢à¹„à¸«à¸¡à¸§à¹ˆà¸²à¸—à¸³à¹„à¸¡..." },
                            { word: "à¸¡à¸µ 3 à¸ªà¸´à¹ˆà¸‡...", meaning: "Power of Three", example: "à¸¡à¸µ 3 à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸ªà¸³à¸„à¸±à¸: 1) 2) 3)" },
                            { word: "à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆ... à¹à¸•à¹ˆà¹€à¸›à¹‡à¸™...", meaning: "Contrast", example: "à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆà¹€à¸£à¸·à¹ˆà¸­à¸‡à¸‚à¸­à¸‡... à¹à¸•à¹ˆà¹€à¸›à¹‡à¸™à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸‚à¸­à¸‡..." }
                        ]
                    },
                    {
                        day: 25, words: [
                            { word: "à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸œà¸¡à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¸„à¸·à¸­...", meaning: "Personal Insight", example: "à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸œà¸¡à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¸„à¸·à¸­..." },
                            { word: "à¸¥à¸­à¸‡à¸„à¸´à¸”à¸”à¸¹à¸§à¹ˆà¸²...", meaning: "Call to Action", example: "à¸¥à¸­à¸‡à¸„à¸´à¸”à¸”à¸¹à¸§à¹ˆà¸²à¸–à¹‰à¸²..." },
                            { word: "à¸ªà¸¸à¸”à¸—à¹‰à¸²à¸¢à¹à¸¥à¹‰à¸§...", meaning: "Conclusion", example: "à¸ªà¸¸à¸”à¸—à¹‰à¸²à¸¢à¹à¸¥à¹‰à¸§à¸¡à¸±à¸™à¸à¹‡à¸„à¸·à¸­..." }
                        ]
                    },
                    {
                        day: 26, words: [
                            { word: "à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸œà¸¡à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¸„à¸·à¸­...", meaning: "Personal Insight", example: "à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸œà¸¡à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¸„à¸·à¸­..." },
                            { word: "à¸¥à¸­à¸‡à¸„à¸´à¸”à¸”à¸¹à¸§à¹ˆà¸²...", meaning: "Call to Action", example: "à¸¥à¸­à¸‡à¸„à¸´à¸”à¸”à¸¹à¸§à¹ˆà¸²à¸–à¹‰à¸²..." },
                            { word: "à¸ªà¸¸à¸”à¸—à¹‰à¸²à¸¢à¹à¸¥à¹‰à¸§...", meaning: "Conclusion", example: "à¸ªà¸¸à¸”à¸—à¹‰à¸²à¸¢à¹à¸¥à¹‰à¸§à¸¡à¸±à¸™à¸à¹‡à¸„à¸·à¸­..." }
                        ]
                    },
                    {
                        day: 27, words: [
                            { word: "à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸œà¸¡à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¸„à¸·à¸­...", meaning: "Personal Insight", example: "à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸œà¸¡à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¸„à¸·à¸­..." },
                            { word: "à¸¥à¸­à¸‡à¸„à¸´à¸”à¸”à¸¹à¸§à¹ˆà¸²...", meaning: "Call to Action", example: "à¸¥à¸­à¸‡à¸„à¸´à¸”à¸”à¸¹à¸§à¹ˆà¸²à¸–à¹‰à¸²..." },
                            { word: "à¸ªà¸¸à¸”à¸—à¹‰à¸²à¸¢à¹à¸¥à¹‰à¸§...", meaning: "Conclusion", example: "à¸ªà¸¸à¸”à¸—à¹‰à¸²à¸¢à¹à¸¥à¹‰à¸§à¸¡à¸±à¸™à¸à¹‡à¸„à¸·à¸­..." }
                        ]
                    },
                    {
                        day: 28, words: [
                            { word: "[à¸ªà¸£à¹‰à¸²à¸‡à¸§à¸¥à¸µà¸›à¸£à¸°à¸ˆà¸³à¸•à¸±à¸§]", meaning: "Signature Phrase", example: "à¸ªà¸£à¹‰à¸²à¸‡à¸§à¸¥à¸µà¸—à¸µà¹ˆà¹€à¸›à¹‡à¸™à¹€à¸­à¸à¸¥à¸±à¸à¸©à¸“à¹Œà¸‚à¸­à¸‡à¸„à¸¸à¸“" }
                        ]
                    },
                    {
                        day: 29, words: [
                            { word: "[à¸ªà¸£à¹‰à¸²à¸‡à¸§à¸¥à¸µà¸›à¸£à¸°à¸ˆà¸³à¸•à¸±à¸§]", meaning: "Signature Phrase", example: "à¸ªà¸£à¹‰à¸²à¸‡à¸§à¸¥à¸µà¸—à¸µà¹ˆà¹€à¸›à¹‡à¸™à¹€à¸­à¸à¸¥à¸±à¸à¸©à¸“à¹Œà¸‚à¸­à¸‡à¸„à¸¸à¸“" }
                        ]
                    },
                    {
                        day: 30, words: [
                            { word: "[à¸ªà¸£à¹‰à¸²à¸‡à¸§à¸¥à¸µà¸›à¸£à¸°à¸ˆà¸³à¸•à¸±à¸§]", meaning: "Signature Phrase", example: "à¸ªà¸£à¹‰à¸²à¸‡à¸§à¸¥à¸µà¸—à¸µà¹ˆà¹€à¸›à¹‡à¸™à¹€à¸­à¸à¸¥à¸±à¸à¸©à¸“à¹Œà¸‚à¸­à¸‡à¸„à¸¸à¸“" }
                        ]
                    }
                ],
                topics: [
                    { day: 22, title: "Camera Confidence", desc: "à¸žà¸¹à¸”à¸”à¸¹à¸•à¸£à¸‡à¸à¸¥à¹‰à¸­à¸‡: à¹à¸™à¸°à¸™à¸³à¸•à¸±à¸§à¹à¸šà¸šà¸¡à¸·à¸­à¸­à¸²à¸Šà¸µà¸ž", duration: 5, focus: "Eye Contact" },
                    { day: 23, title: "Camera Confidence", desc: "à¸žà¸¹à¸”à¸”à¸¹à¸•à¸£à¸‡à¸à¸¥à¹‰à¸­à¸‡: à¸—à¸³à¹„à¸¡à¸„à¸§à¸£à¸•à¸´à¸”à¸•à¸²à¸¡à¸„à¸¸à¸“", duration: 5, focus: "Body Language" },
                    { day: 24, title: "Energy Level 7/10", desc: "à¸žà¸¹à¸”à¸”à¹‰à¸§à¸¢à¸žà¸¥à¸±à¸‡à¸£à¸°à¸”à¸±à¸šà¸ªà¸¹à¸‡", duration: 5, focus: "Energy" },
                    { day: 25, title: "Energy Level 9/10", desc: "à¸žà¸¹à¸”à¸”à¹‰à¸§à¸¢à¸žà¸¥à¸±à¸‡à¹€à¸•à¹‡à¸¡à¸—à¸µà¹ˆ", duration: 5, focus: "Energy" },
                    { day: 26, title: "Style Test: Casual", desc: "à¸—à¸”à¸¥à¸­à¸‡à¸ªà¹„à¸•à¸¥à¹Œà¹à¸šà¸šà¸ªà¸šà¸²à¸¢à¹†", duration: 5, focus: "Style" },
                    { day: 27, title: "Style Test: Professional", desc: "à¸—à¸”à¸¥à¸­à¸‡à¸ªà¹„à¸•à¸¥à¹Œà¹à¸šà¸šà¸¡à¸·à¸­à¸­à¸²à¸Šà¸µà¸ž", duration: 5, focus: "Style" },
                    { day: 28, title: "CONTENT CREATION", desc: "à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸­à¸™à¹€à¸—à¸™à¸•à¹Œà¸ˆà¸£à¸´à¸‡ 5 à¸™à¸²à¸—à¸µ", duration: 5, type: "challenge" },
                    { day: 29, title: "CONTENT CREATION", desc: "à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸­à¸™à¹€à¸—à¸™à¸•à¹Œà¸ˆà¸£à¸´à¸‡ (à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡)", duration: 5, type: "challenge" },
                    { day: 30, title: "ðŸŽ¯ FINAL BOSS", desc: "à¸¥à¸‡à¸„à¸­à¸™à¹€à¸—à¸™à¸•à¹Œà¸ˆà¸£à¸´à¸‡ / Go Live!", duration: 10, type: "final" }
                ]
            }
        };

        // AI Coach System
        class AICoach {
            constructor(apiKey) {
                this.apiKey = apiKey;
                this.baseURL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent';
            }

            async analyzeSpeech(transcript, duration, weekData, topicData) {
                if (!this.apiKey) {
                    console.error('âŒ No API key provided');
                    return null;
                }

                // Handle transcript properly
                let transcriptText = '';
                if (!transcript || (Array.isArray(transcript) && transcript.length === 0)) {
                    transcriptText = '[à¹„à¸¡à¹ˆà¸¡à¸µ transcript - Speech Recognition à¸­à¸²à¸ˆà¹„à¸¡à¹ˆà¸—à¸³à¸‡à¸²à¸™]';
                    console.warn('âš ï¸ No transcript available for AI analysis');
                } else if (Array.isArray(transcript)) {
                    transcriptText = transcript.map(seg => seg.text).join(' ');
                } else {
                    transcriptText = String(transcript);
                }

                const prompt = `à¸„à¸¸à¸“à¸„à¸·à¸­à¹‚à¸„à¹‰à¸Šà¸ªà¸­à¸™à¸à¸²à¸£à¸žà¸¹à¸”à¸¡à¸·à¸­à¸­à¸²à¸Šà¸µà¸ž à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸à¸²à¸£à¸žà¸¹à¸”à¸•à¹ˆà¸­à¹„à¸›à¸™à¸µà¹‰à¸­à¸¢à¹ˆà¸²à¸‡à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”:

**à¸«à¸±à¸§à¸‚à¹‰à¸­:** ${topicData.title} - ${topicData.desc}
**à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œà¸™à¸µà¹‰:** ${weekData.goal}
**à¸£à¸°à¸¢à¸°à¹€à¸§à¸¥à¸²:** ${Math.floor(duration / 60)} à¸™à¸²à¸—à¸µ ${duration % 60} à¸§à¸´à¸™à¸²à¸—à¸µ

**à¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¸—à¸µà¹ˆà¸žà¸¹à¸”:**
${transcriptText}

à¸à¸£à¸¸à¸“à¸²à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸­à¸¢à¹ˆà¸²à¸‡à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¹à¸¥à¸°à¹ƒà¸«à¹‰à¸œà¸¥à¸¥à¸±à¸žà¸˜à¹Œà¹€à¸›à¹‡à¸™ JSON:

{
  "sentences": [
    {
      "text": "à¸›à¸£à¸°à¹‚à¸¢à¸„à¸—à¸µà¹ˆà¸žà¸¹à¸”",
      "purpose": "à¸ˆà¸¸à¸”à¸›à¸£à¸°à¸ªà¸‡à¸„à¹Œ",
      "clarity": 7,
      "issues": ["à¸›à¸±à¸à¸«à¸²à¸—à¸µà¹ˆà¸žà¸š"]
    }
  ],
  "structure": {
    "hasIntro": true,
    "hasBody": true,
    "hasConclusion": false,
    "overallStructure": "à¸­à¸˜à¸´à¸šà¸²à¸¢à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡",
    "score": 6
  },
  "cognitivePatterns": {
    "thinkingStyle": "scattered",
    "scopeControl": "expanding",
    "preparedness": "improvised",
    "issues": ["à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸„à¸´à¸”à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸à¹ˆà¸­à¸™à¸žà¸¹à¸”", "à¸‚à¸²à¸” scope à¸—à¸µà¹ˆà¸Šà¸±à¸”à¹€à¸ˆà¸™"]
  },
  "rootCause": {
    "primaryIssue": "à¸‚à¸²à¸”à¸à¸²à¸£à¸§à¸²à¸‡à¹à¸œà¸™",
    "whyYouSpokeThatWay": "à¸žà¸¹à¸”à¹‚à¸”à¸¢à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸„à¸´à¸”à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸¥à¹ˆà¸§à¸‡à¸«à¸™à¹‰à¸²",
    "deepInsights": ["insight1", "insight2"]
  },
  "scores": {
    "fluency": 7,
    "clarity": 6,
    "structure": 5,
    "engagement": 7,
    "overall": 6.5
  },
  "strengths": ["à¸ˆà¸¸à¸”à¹à¸‚à¹‡à¸‡1", "à¸ˆà¸¸à¸”à¹à¸‚à¹‡à¸‡2", "à¸ˆà¸¸à¸”à¹à¸‚à¹‡à¸‡3"],
  "improvements": ["à¸„à¸§à¸£à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡1", "à¸„à¸§à¸£à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡2", "à¸„à¸§à¸£à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡3"],
  "nextSteps": "à¸„à¸³à¹à¸™à¸°à¸™à¸³"
}

à¸ªà¸´à¹ˆà¸‡à¸ªà¸³à¸„à¸±à¸:
- à¹à¸¢à¸à¸›à¸£à¸°à¹‚à¸¢à¸„à¹à¸¥à¸°à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸—à¸µà¸¥à¸°à¸›à¸£à¸°à¹‚à¸¢à¸„
- à¸”à¸¹à¸§à¹ˆà¸²à¸¡à¸µà¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡ intro-body-conclusion à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ
- à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸§à¹ˆà¸²à¸œà¸¹à¹‰à¸žà¸¹à¸”à¸¡à¸µà¸à¸²à¸£à¸§à¸²à¸‡à¹à¸œà¸™/à¸„à¸´à¸”à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸à¹ˆà¸­à¸™à¸žà¸¹à¸”à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ
- à¸­à¸˜à¸´à¸šà¸²à¸¢à¸§à¹ˆà¸²à¸—à¸³à¹„à¸¡à¸ˆà¸¶à¸‡à¸žà¸¹à¸”à¹à¸šà¸šà¸™à¸±à¹‰à¸™`;

                try {
                    const response = await fetch(`${this.baseURL}?key=${this.apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{ text: prompt }]
                            }]
                        })
                    });

                    if (!response.ok) {
                        console.error('âŒ API Error:', response.status, response.statusText);
                        if (response.status === 404) {
                            console.error('ðŸš« API 404: Model not found or API key is invalid');
                            console.log('ðŸ”‘ Please check your API key at: https://aistudio.google.com/app/apikey');
                        } else if (response.status === 403) {
                            console.error('ðŸš« API 403: Permission denied - API key may be restricted or quota exceeded');
                        } else if (response.status === 400) {
                            const errorText = await response.text();
                            console.error('ðŸš« API 400: Bad request -', errorText);
                        }
                        return null;
                    }

                    const data = await response.json();
                    if (!data.candidates || !data.candidates[0]) {
                        console.error('âš ï¸ No valid response from API');
                        return null;
                    }

                    const text = data.candidates[0].content.parts[0].text;

                    // Extract JSON from response
                    const jsonMatch = text.match(/\{[\s\S]*\}/);
                    if (jsonMatch) {
                        return JSON.parse(jsonMatch[0]);
                    }

                    console.error('âš ï¸ No valid JSON found in AI response');
                    return null;
                } catch (error) {
                    console.error('âŒ AI Analysis Error:', error);
                    return null;
                }
            }


        }

        // Main App Component
        function App() {
            const [currentDay, setCurrentDay] = useState(1);
            const [currentView, setCurrentView] = useState('dashboard');
            const [timer, setTimer] = useState(0);
            const [isTimerRunning, setIsTimerRunning] = useState(false);
            const [sessions, setSessions] = useState([]);
            const [todayCompleted, setTodayCompleted] = useState(false);
            const [apiKey, setApiKey] = useState('');
            const [isRecording, setIsRecording] = useState(false);
            const [mediaRecorder, setMediaRecorder] = useState(null);
            const [recordedBlob, setRecordedBlob] = useState(null);
            const [aiFeedback, setAiFeedback] = useState(null);
            const [isAnalyzing, setIsAnalyzing] = useState(false);
            const [achievements, setAchievements] = useState([]);
            const [showAchievement, setShowAchievement] = useState(null);

            // NEW: Speech recognition and transcript
            const [transcript, setTranscript] = useState([]);
            const [liveTranscript, setLiveTranscript] = useState('');
            const [currentSentenceIndex, setCurrentSentenceIndex] = useState(-1);
            const [audioCurrentTime, setAudioCurrentTime] = useState(0);

            const aiCoach = useRef(null);
            const recognition = useRef(null);
            const audioPlayer = useRef(null);
            const recordingStartTime = useRef(0);

            useEffect(() => {
                loadProgress();
            }, []);

            useEffect(() => {
                let interval;
                if (isTimerRunning) {
                    interval = setInterval(() => {
                        setTimer(t => t + 1);
                    }, 1000);
                }
                return () => clearInterval(interval);
            }, [isTimerRunning]);

            useEffect(() => {
                if (apiKey) {
                    aiCoach.current = new AICoach(apiKey);
                    localStorage.setItem('gemini_api_key', apiKey);
                }
            }, [apiKey]);

            async function loadProgress() {
                const savedDay = localStorage.getItem('current_day');
                const savedSessions = localStorage.getItem('sessions');
                const savedApiKey = localStorage.getItem('gemini_api_key');
                const savedAchievements = localStorage.getItem('achievements');
                const completedToday = localStorage.getItem(`completed_day_${currentDay}`);

                if (savedDay) setCurrentDay(parseInt(savedDay));
                if (savedSessions) setSessions(JSON.parse(savedSessions));
                if (savedApiKey) setApiKey(savedApiKey);
                if (savedAchievements) setAchievements(JSON.parse(savedAchievements));
                if (completedToday) setTodayCompleted(completedToday === 'true');
            }

            function saveProgress(day, newSessions) {
                localStorage.setItem('current_day', day.toString());
                localStorage.setItem('sessions', JSON.stringify(newSessions));

                // Auto-export to JSON file every session
                exportToJSON(newSessions);
            }

            function exportToJSON(sessionsData = sessions) {
                const data = {
                    version: '2.0',
                    exportDate: new Date().toISOString(),
                    currentDay: currentDay,
                    sessions: sessionsData,
                    achievements: achievements
                };

                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `speaking-coach-backup-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
            }

            function importFromJSON(event) {
                const file = event.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const data = JSON.parse(e.target.result);
                        setCurrentDay(data.currentDay || 1);
                        setSessions(data.sessions || []);
                        setAchievements(data.achievements || []);

                        localStorage.setItem('current_day', (data.currentDay || 1).toString());
                        localStorage.setItem('sessions', JSON.stringify(data.sessions || []));
                        localStorage.setItem('achievements', JSON.stringify(data.achievements || []));

                        alert('à¸™à¸³à¹€à¸‚à¹‰à¸²à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!');
                    } catch (error) {
                        alert('à¹„à¸Ÿà¸¥à¹Œà¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡');
                    }
                };
                reader.readAsText(file);
            }

            async function startRecording() {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({
                        audio: true,
                        video: false
                    });

                    const recorder = new MediaRecorder(stream);
                    const chunks = [];

                    recorder.ondataavailable = (e) => chunks.push(e.data);
                    recorder.onstop = () => {
                        const blob = new Blob(chunks, { type: 'audio/webm' });
                        setRecordedBlob(blob);
                    };

                    recorder.start();
                    setMediaRecorder(recorder);
                    setIsRecording(true);

                    // Initialize speech recognition
                    initializeSpeechRecognition();

                    recordingStartTime.current = Date.now();
                    startTimer();
                } catch (error) {
                    alert('à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡à¹„à¸¡à¸„à¹Œà¹„à¸”à¹‰ à¸à¸£à¸¸à¸“à¸²à¸­à¸™à¸¸à¸à¸²à¸•à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹„à¸¡à¸„à¹Œ');
                    console.error(error);
                }
            }

            function initializeSpeechRecognition() {
                try {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    if (!SpeechRecognition) {
                        console.warn('Speech Recognition not supported in this browser');
                        return;
                    }

                    const recog = new SpeechRecognition();
                    recog.continuous = true;
                    recog.interimResults = true;
                    recog.lang = 'th-TH';

                    const transcriptSegments = [];
                    let currentSegment = { text: '', startTime: 0, endTime: 0 };

                    recog.onstart = () => {
                        console.log('âœ… Speech recognition started');
                        currentSegment.startTime = (Date.now() - recordingStartTime.current) / 1000;
                    };

                    recog.onresult = (event) => {
                        let interimTranscript = '';
                        let finalTranscript = '';

                        for (let i = event.resultIndex; i < event.results.length; i++) {
                            const transcript = event.results[i][0].transcript;
                            if (event.results[i].isFinal) {
                                finalTranscript += transcript + ' ';
                            } else {
                                interimTranscript += transcript;
                            }
                        }

                        // Update live transcript
                        setLiveTranscript(interimTranscript);

                        // Save final transcript with timestamp
                        if (finalTranscript) {
                            const endTime = (Date.now() - recordingStartTime.current) / 1000;
                            transcriptSegments.push({
                                text: finalTranscript.trim(),
                                startTime: currentSegment.startTime,
                                endTime: endTime
                            });
                            setTranscript([...transcriptSegments]);

                            // Reset for next segment
                            currentSegment = { text: '', startTime: endTime, endTime: 0 };
                        }
                    };

                    recog.onerror = (event) => {
                        console.error('âŒ Speech recognition error:', event.error);
                        if (event.error === 'network') {
                            console.warn('âš ï¸ Network error - Speech recognition may not work on HTTP (needs HTTPS) or your browser may not support it');
                        } else if (event.error === 'not-allowed') {
                            console.warn('âš ï¸ Microphone access denied - please allow microphone permission');
                        }
                    };

                    recog.onend = () => {
                        console.log('Speech recognition ended');
                        // Auto-restart if still recording
                        if (mediaRecorder && mediaRecorder.state === 'recording') {
                            try {
                                recog.start();
                                console.log('ðŸ”„ Restarting speech recognition...');
                            } catch (e) {
                                console.error('Failed to restart speech recognition:', e);
                            }
                        }
                    };

                    recog.start();
                    recognition.current = recog;
                } catch (error) {
                    console.error('Failed to initialize speech recognition:', error);
                }
            }

            function stopRecording() {
                if (mediaRecorder) {
                    mediaRecorder.stop();
                    mediaRecorder.stream.getTracks().forEach(track => track.stop());
                    setIsRecording(false);
                    setIsTimerRunning(false);
                }

                // Stop speech recognition
                if (recognition.current) {
                    recognition.current.stop();
                }

                setLiveTranscript('');
            }

            async function analyzeWithAI() {
                if (!apiKey) {
                    alert('à¸à¸£à¸¸à¸“à¸²à¹ƒà¸ªà¹ˆ Gemini API Key à¹ƒà¸™à¸«à¸™à¹‰à¸²à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸à¹ˆà¸­à¸™');
                    return;
                }

                setIsAnalyzing(true);

                const { weekData, topicData } = getTodayData();

                // Handle undefined or empty transcript
                const transcriptData = (transcript && transcript.length > 0)
                    ? transcript
                    : "à¹„à¸¡à¹ˆà¸¡à¸µ transcript (Speech Recognition à¸­à¸²à¸ˆà¹„à¸¡à¹ˆà¸£à¸­à¸‡à¸£à¸±à¸šà¹ƒà¸™à¸šà¸£à¸²à¸§à¹€à¸‹à¸­à¸£à¹Œà¸™à¸µà¹‰)";

                console.log('ðŸ¤– Starting AI analysis...');
                console.log('Transcript data:', transcriptData);
                console.log('Is array?', Array.isArray(transcriptData), 'Length:', Array.isArray(transcriptData) ? transcriptData.length : 'N/A');

                const feedback = await aiCoach.current.analyzeSpeech(
                    transcriptData,
                    timer,
                    weekData,
                    topicData
                );

                console.log('âœ… AI analysis complete:', feedback);
                setAiFeedback(feedback);
                setIsAnalyzing(false);
            }

            async function completeSession(manualScore, notes) {
                const score = aiFeedback ? aiFeedback.scores.overall : manualScore;

                const newSession = {
                    day: currentDay,
                    date: new Date().toISOString(),
                    duration: timer,
                    score: score,
                    notes: notes,
                    transcript: transcript,  // Store transcript with timestamps
                    aiFeedback: aiFeedback,
                    hasRecording: !!recordedBlob
                };

                const newSessions = [...sessions, newSession];
                setSessions(newSessions);
                setTodayCompleted(true);

                saveProgress(currentDay, newSessions);
                localStorage.setItem(`completed_day_${currentDay}`, 'true');

                // Check achievements
                checkAchievements(newSessions, score);

                // Reset for next session
                setRecordedBlob(null);
                setAiFeedback(null);
                setTranscript([]);
                setLiveTranscript('');

                // Auto advance
                if (currentDay < 30) {
                    setTimeout(() => {
                        const nextDay = currentDay + 1;
                        setCurrentDay(nextDay);
                        setTodayCompleted(false);
                        localStorage.setItem('current_day', nextDay.toString());
                        localStorage.removeItem(`completed_day_${nextDay}`);
                    }, 2000);
                }
            }

            function checkAchievements(sessionsData, latestScore) {
                const newAchievements = [];

                // Fire Starter
                if (calculateStreak(sessionsData) >= 3 && !achievements.includes('fire_starter')) {
                    newAchievements.push({
                        id: 'fire_starter',
                        title: 'ðŸ”¥ Fire Starter',
                        desc: 'à¸à¸¶à¸ 3 à¸§à¸±à¸™à¸•à¸´à¸”à¸•à¹ˆà¸­à¸à¸±à¸™!'
                    });
                }

                // Week Warrior
                if (sessionsData.length >= 7 && !achievements.includes('week_warrior')) {
                    newAchievements.push({
                        id: 'week_warrior',
                        title: 'ðŸ’ª Week Warrior',
                        desc: 'à¸ˆà¸šà¸ªà¸±à¸›à¸”à¸²à¸«à¹Œà¸—à¸µà¹ˆ 1!'
                    });
                }

                // Perfect Score
                if (latestScore >= 9.5 && !achievements.includes('perfect_score')) {
                    newAchievements.push({
                        id: 'perfect_score',
                        title: 'â­ Perfect Score',
                        desc: 'à¹„à¸”à¹‰à¸„à¸°à¹à¸™à¸™à¹€à¸à¸·à¸­à¸šà¹€à¸•à¹‡à¸¡!'
                    });
                }

                if (newAchievements.length > 0) {
                    const updatedAchievements = [...achievements, ...newAchievements.map(a => a.id)];
                    setAchievements(updatedAchievements);
                    localStorage.setItem('achievements', JSON.stringify(updatedAchievements));

                    // Show first achievement
                    setShowAchievement(newAchievements[0]);
                    setTimeout(() => setShowAchievement(null), 3000);
                }
            }

            function startTimer() {
                setTimer(0);
                setIsTimerRunning(true);
            }

            function stopTimer() {
                setIsTimerRunning(false);
            }

            function resetTimer() {
                setTimer(0);
                setIsTimerRunning(false);
                setRecordedBlob(null);
                setAiFeedback(null);
                setTranscript([]);
                setLiveTranscript('');
                setCurrentSentenceIndex(-1);
            }

            function resetProgress() {
                if (confirm('à¸„à¸¸à¸“à¹à¸™à¹ˆà¹ƒà¸ˆà¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ? à¸à¸²à¸£à¸à¸£à¸°à¸—à¸³à¸™à¸µà¹‰à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¢à¹‰à¸­à¸™à¸à¸¥à¸±à¸šà¹„à¸”à¹‰')) {
                    // Export before reset
                    exportToJSON();

                    setCurrentDay(1);
                    setSessions([]);
                    setTodayCompleted(false);
                    setAchievements([]);

                    localStorage.clear();
                    alert('à¸£à¸µà¹€à¸‹à¹‡à¸•à¸ªà¸³à¹€à¸£à¹‡à¸ˆ! à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸à¹ˆà¸²à¸–à¸¹à¸ Export à¹ƒà¸«à¹‰à¹à¸¥à¹‰à¸§');
                }
            }

            function getCurrentWeek() {
                if (currentDay <= 7) return 'week1';
                if (currentDay <= 14) return 'week2';
                if (currentDay <= 21) return 'week3';
                return 'week4';
            }

            function getTodayData() {
                const week = getCurrentWeek();
                const weekData = TRAINING_DATA[week];
                const topicData = weekData.topics.find(t => t.day === currentDay);
                const powerWordData = weekData.powerWords.find(pw => pw.day === currentDay);

                return { weekData, topicData, powerWordData };
            }

            const { weekData, topicData, powerWordData } = getTodayData();

            return (
                <div className="min-h-screen p-4 md:p-8">
                    {/* Achievement Popup */}
                    {showAchievement && (
                        <div className="fixed top-4 right-4 z-50 achievement-pop glass-effect rounded-2xl p-6 shadow-2xl max-w-sm">
                            <div className="text-4xl mb-2">{showAchievement.title.split(' ')[0]}</div>
                            <div className="font-bold text-lg text-purple-600">{showAchievement.title}</div>
                            <div className="text-sm text-gray-600">{showAchievement.desc}</div>
                        </div>
                    )}

                    <div className="max-w-6xl mx-auto">
                        {/* Header */}
                        <div className="glass-effect rounded-3xl p-6 mb-6 shadow-2xl">
                            <div className="flex justify-between items-start mb-4">
                                <div>
                                    <h1 className="text-3xl md:text-4xl font-bold text-purple-800 mb-2">
                                        ðŸŽ¯ Speaking Coach Pro
                                    </h1>
                                    <p className="text-gray-600">Zero to Hero in 30 Days</p>
                                    {apiKey && (
                                        <div className="mt-2 ai-badge text-white text-xs px-3 py-1 rounded-full inline-block">
                                            âœ¨ AI-Powered
                                        </div>
                                    )}
                                </div>
                                <div className="text-right">
                                    <div className="text-sm text-gray-500">Day</div>
                                    <div className="text-3xl font-bold text-purple-600">{currentDay}/30</div>
                                </div>
                            </div>

                            <div className="flex flex-wrap gap-2">
                                <button
                                    onClick={() => setCurrentView('dashboard')}
                                    className={`px-4 py-2 rounded-lg font-semibold transition ${currentView === 'dashboard' ? 'bg-purple-600 text-white' : 'bg-purple-100 text-purple-600'}`}
                                >
                                    ðŸ“Š Dashboard
                                </button>
                                <button
                                    onClick={() => setCurrentView('training')}
                                    className={`px-4 py-2 rounded-lg font-semibold transition ${currentView === 'training' ? 'bg-purple-600 text-white' : 'bg-purple-100 text-purple-600'}`}
                                >
                                    ðŸ’ª à¸à¸¶à¸à¸§à¸±à¸™à¸™à¸µà¹‰
                                </button>
                                <button
                                    onClick={() => setCurrentView('words')}
                                    className={`px-4 py-2 rounded-lg font-semibold transition ${currentView === 'words' ? 'bg-purple-600 text-white' : 'bg-purple-100 text-purple-600'}`}
                                >
                                    ðŸ“š Power Words
                                </button>
                                <button
                                    onClick={() => setCurrentView('progress')}
                                    className={`px-4 py-2 rounded-lg font-semibold transition ${currentView === 'progress' ? 'bg-purple-600 text-white' : 'bg-purple-100 text-purple-600'}`}
                                >
                                    ðŸ“ˆ à¸„à¸§à¸²à¸¡à¸„à¸·à¸šà¸«à¸™à¹‰à¸²
                                </button>
                                <button
                                    onClick={() => setCurrentView('settings')}
                                    className={`px-4 py-2 rounded-lg font-semibold transition ${currentView === 'settings' ? 'bg-purple-600 text-white' : 'bg-purple-100 text-purple-600'}`}
                                >
                                    âš™ï¸ à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²
                                </button>
                            </div>
                        </div>

                        {/* Views */}
                        {currentView === 'dashboard' && (
                            <Dashboard
                                currentDay={currentDay}
                                weekData={weekData}
                                sessions={sessions}
                                todayCompleted={todayCompleted}
                                setCurrentView={setCurrentView}
                                achievements={achievements}
                            />
                        )}

                        {currentView === 'training' && (
                            <TrainingView
                                currentDay={currentDay}
                                topicData={topicData}
                                weekData={weekData}
                                timer={timer}
                                isTimerRunning={isTimerRunning}
                                isRecording={isRecording}
                                startRecording={startRecording}
                                stopRecording={stopRecording}
                                resetTimer={resetTimer}
                                completeSession={completeSession}
                                todayCompleted={todayCompleted}
                                recordedBlob={recordedBlob}
                                analyzeWithAI={analyzeWithAI}
                                aiFeedback={aiFeedback}
                                isAnalyzing={isAnalyzing}
                                hasApiKey={!!apiKey}
                                transcript={transcript}
                                liveTranscript={liveTranscript}
                                audioPlayerRef={audioPlayer}
                                currentSentenceIndex={currentSentenceIndex}
                                setCurrentSentenceIndex={setCurrentSentenceIndex}
                                audioCurrentTime={audioCurrentTime}
                                setAudioCurrentTime={setAudioCurrentTime}
                            />
                        )}

                        {currentView === 'words' && (
                            <PowerWordsView
                                currentDay={currentDay}
                                powerWordData={powerWordData}
                                weekData={weekData}
                            />
                        )}

                        {currentView === 'progress' && (
                            <ProgressView
                                sessions={sessions}
                                currentDay={currentDay}
                                resetProgress={resetProgress}
                                exportToJSON={() => exportToJSON()}
                                importFromJSON={importFromJSON}
                                achievements={achievements}
                            />
                        )}

                        {currentView === 'settings' && (
                            <SettingsView
                                apiKey={apiKey}
                                setApiKey={setApiKey}
                            />
                        )}
                    </div>
                </div>
            );
        }

        // Dashboard Component (same as before but with achievements)
        function Dashboard({ currentDay, weekData, sessions, todayCompleted, setCurrentView, achievements }) {
            const progress = (currentDay / 30) * 100;
            const streak = calculateStreak(sessions);

            return (
                <div className="space-y-6">
                    <div className="glass-effect rounded-3xl p-8 shadow-2xl">
                        <div className="flex justify-between items-center mb-4">
                            <div>
                                <h2 className="text-2xl font-bold text-gray-800">Day {currentDay}/30</h2>
                                <p className="text-purple-600 font-semibold">{weekData.name}</p>
                                <p className="text-sm text-gray-600">{weekData.goal}</p>
                            </div>
                            <div className="text-right">
                                <div className="text-4xl font-bold text-purple-600">{Math.round(progress)}%</div>
                                <div className="text-sm text-gray-600">à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸¡à¸šà¸¹à¸£à¸“à¹Œ</div>
                            </div>
                        </div>

                        <div className="w-full bg-gray-200 rounded-full h-4 mb-6">
                            <div
                                className="bg-gradient-to-r from-purple-500 to-pink-500 h-4 rounded-full transition-all duration-500"
                                style={{ width: `${progress}%` }}
                            ></div>
                        </div>

                        <div className="grid grid-cols-3 gap-4">
                            <div className="text-center p-4 bg-purple-50 rounded-xl">
                                <div className="text-3xl font-bold text-purple-600">{sessions.length}</div>
                                <div className="text-sm text-gray-600">à¹€à¸‹à¸ªà¸Šà¸±à¸™à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”</div>
                            </div>
                            <div className="text-center p-4 bg-pink-50 rounded-xl">
                                <div className="text-3xl font-bold text-pink-600">{streak}</div>
                                <div className="text-sm text-gray-600">à¸§à¸±à¸™à¸•à¸´à¸”à¸•à¹ˆà¸­à¸à¸±à¸™ ðŸ”¥</div>
                            </div>
                            <div className="text-center p-4 bg-indigo-50 rounded-xl">
                                <div className="text-3xl font-bold text-indigo-600">
                                    {sessions.length > 0 ? (sessions.reduce((a, b) => a + b.score, 0) / sessions.length).toFixed(1) : 0}
                                </div>
                                <div className="text-sm text-gray-600">à¸„à¸°à¹à¸™à¸™à¹€à¸‰à¸¥à¸µà¹ˆà¸¢</div>
                            </div>
                        </div>
                    </div>

                    {/* Achievements */}
                    {achievements.length > 0 && (
                        <div className="glass-effect rounded-3xl p-8 shadow-2xl">
                            <h3 className="text-xl font-bold text-gray-800 mb-4">ðŸ† Achievements</h3>
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                                {achievements.map((id) => {
                                    const badges = {
                                        fire_starter: { emoji: 'ðŸ”¥', name: 'Fire Starter' },
                                        week_warrior: { emoji: 'ðŸ’ª', name: 'Week Warrior' },
                                        perfect_score: { emoji: 'â­', name: 'Perfect Score' },
                                        half_way: { emoji: 'ðŸŽ¯', name: 'Half Way' }
                                    };
                                    const badge = badges[id];
                                    return badge ? (
                                        <div key={id} className="bg-gradient-to-br from-purple-50 to-pink-50 p-4 rounded-xl text-center border-2 border-purple-200">
                                            <div className="text-3xl mb-1">{badge.emoji}</div>
                                            <div className="text-xs font-semibold text-purple-600">{badge.name}</div>
                                        </div>
                                    ) : null;
                                })}
                            </div>
                        </div>
                    )}

                    {/* Today's Mission */}
                    <div className="glass-effect rounded-3xl p-8 shadow-2xl">
                        <h3 className="text-xl font-bold text-gray-800 mb-4">
                            {todayCompleted ? 'âœ… à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸´à¹‰à¸™à¹à¸¥à¹‰à¸§à¸§à¸±à¸™à¸™à¸µà¹‰!' : 'ðŸŽ¯ à¸ à¸²à¸£à¸à¸´à¸ˆà¸§à¸±à¸™à¸™à¸µà¹‰'}
                        </h3>
                        {todayCompleted ? (
                            <div className="text-center py-8">
                                <div className="text-6xl mb-4">ðŸŽ‰</div>
                                <p className="text-lg text-gray-600 mb-4">à¸¢à¸­à¸”à¹€à¸¢à¸µà¹ˆà¸¢à¸¡! à¸„à¸¸à¸“à¸—à¸³à¸ à¸²à¸£à¸à¸´à¸ˆà¸§à¸±à¸™à¸™à¸µà¹‰à¸ªà¸³à¹€à¸£à¹‡à¸ˆà¹à¸¥à¹‰à¸§</p>
                                <p className="text-sm text-gray-500">à¸à¸¥à¸±à¸šà¸¡à¸²à¸žà¸£à¸¸à¹ˆà¸‡à¸™à¸µà¹‰à¹€à¸žà¸·à¹ˆà¸­à¸à¸¶à¸à¸•à¹ˆà¸­</p>
                            </div>
                        ) : (
                            <button
                                onClick={() => setCurrentView('training')}
                                className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-6 rounded-xl font-bold text-lg hover:shadow-2xl transition transform hover:scale-105"
                            >
                                ðŸš€ à¹€à¸£à¸´à¹ˆà¸¡à¸à¸¶à¸à¹€à¸¥à¸¢! (Day {currentDay})
                            </button>
                        )}
                    </div>
                </div>
            );
        }

        // Training View with AI (truncated for brevity - will continue in next file)
        function TrainingView({ currentDay, topicData, weekData, timer, isTimerRunning, isRecording,
            startRecording, stopRecording, resetTimer, completeSession, todayCompleted,
            recordedBlob, analyzeWithAI, aiFeedback, isAnalyzing, hasApiKey,
            transcript, liveTranscript, audioPlayerRef, currentSentenceIndex,
            setCurrentSentenceIndex, audioCurrentTime, setAudioCurrentTime }) {
            const [score, setScore] = useState(5);
            const [notes, setNotes] = useState('');
            const [showCompleteForm, setShowCompleteForm] = useState(false);

            function formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }

            function handleComplete() {
                stopRecording();
                setShowCompleteForm(true);

                // Trigger AI analysis immediately if API key exists
                if (hasApiKey) {
                    console.log('ðŸŽ¯ Auto-triggering AI analysis...');
                    // Small delay to ensure state updates
                    setTimeout(() => {
                        analyzeWithAI();
                    }, 100);
                }
            }

            function handleSubmitSession() {
                completeSession(score, notes);
                setShowCompleteForm(false);
                setScore(5);
                setNotes('');
                resetTimer();
            }

            if (todayCompleted) {
                return (
                    <div className="glass-effect rounded-3xl p-8 shadow-2xl text-center">
                        <div className="text-6xl mb-4">âœ…</div>
                        <h2 className="text-2xl font-bold text-gray-800 mb-2">à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸´à¹‰à¸™à¹à¸¥à¹‰à¸§!</h2>
                        <p className="text-gray-600 mb-4">à¸„à¸¸à¸“à¹„à¸”à¹‰à¸—à¸³à¸ à¸²à¸£à¸à¸´à¸ˆà¸§à¸±à¸™à¸—à¸µà¹ˆ {currentDay} à¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢à¹à¸¥à¹‰à¸§</p>
                    </div>
                );
            }

            return (
                <div className="space-y-6">
                    {/* Training Info */}
                    <div className="glass-effect rounded-3xl p-8 shadow-2xl">
                        <div className="mb-6">
                            <span className="bg-purple-100 text-purple-600 px-3 py-1 rounded-full text-sm font-semibold">
                                Day {currentDay} - {weekData.name}
                            </span>
                        </div>

                        <h2 className="text-3xl font-bold text-gray-800 mb-2">{topicData.title}</h2>
                        <p className="text-gray-600 text-lg mb-4">{topicData.desc}</p>

                        <div className="flex gap-4 flex-wrap">
                            <div className="bg-purple-50 px-4 py-2 rounded-lg">
                                <span className="text-sm text-gray-600">à¹€à¸§à¸¥à¸²à¹à¸™à¸°à¸™à¸³: </span>
                                <span className="font-bold text-purple-600">{topicData.duration} à¸™à¸²à¸—à¸µ</span>
                            </div>
                        </div>
                    </div>

                    {/* Timer & Recording */}
                    <div className="glass-effect rounded-3xl p-8 shadow-2xl text-center">
                        <div className={`timer-display mb-6 ${isRecording ? 'text-red-600' : 'text-purple-600'}`}>
                            {formatTime(timer)}
                        </div>

                        {isRecording && (
                            <div className="recording-indicator mb-6">
                                <div className="inline-block bg-red-100 border-2 border-red-500 rounded-full px-4 py-2">
                                    <span className="text-red-600 font-semibold">ðŸ”´ à¸à¸³à¸¥à¸±à¸‡à¸­à¸±à¸”...</span>
                                </div>
                            </div>
                        )}

                        <div className="flex gap-4 justify-center flex-wrap">
                            {!isRecording ? (
                                <button
                                    onClick={startRecording}
                                    className="bg-gradient-to-r from-red-500 to-red-600 text-white px-8 py-4 rounded-xl font-bold text-lg hover:shadow-2xl transition transform hover:scale-105"
                                >
                                    ðŸŽ¤ à¹€à¸£à¸´à¹ˆà¸¡à¸­à¸±à¸” + AI Analysis
                                </button>
                            ) : (
                                <>
                                    <button
                                        onClick={handleComplete}
                                        className="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-8 py-4 rounded-xl font-bold text-lg hover:shadow-2xl transition transform hover:scale-105"
                                    >
                                        âœ… à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸´à¹‰à¸™
                                    </button>
                                </>
                            )}

                            {timer > 0 && !isRecording && (
                                <button
                                    onClick={resetTimer}
                                    className="bg-gray-300 text-gray-700 px-8 py-4 rounded-xl font-bold text-lg hover:shadow-xl transition"
                                >
                                    ðŸ”„ à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ
                                </button>
                            )}
                        </div>

                        {!hasApiKey && (
                            <div className="mt-4 bg-yellow-50 border-2 border-yellow-200 rounded-xl p-4">
                                <p className="text-sm text-yellow-700">
                                    ðŸ’¡ à¹ƒà¸ªà¹ˆ Gemini API Key à¹ƒà¸™à¸«à¸™à¹‰à¸²à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¹€à¸žà¸·à¹ˆà¸­à¸£à¸±à¸š AI Feedback à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´!
                                </p>
                            </div>
                        )}
                    </div>

                    {/* Live Transcript Display */}
                    {(isRecording || transcript.length > 0) && (
                        <div className="glass-effect rounded-3xl p-8 shadow-2xl">
                            <h3 className="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                                <span>ðŸ“</span> Transcript
                                {isRecording && <span className="text-sm text-red-600 animate-pulse">(à¸à¸³à¸¥à¸±à¸‡à¸šà¸±à¸™à¸—à¸¶à¸...)</span>}
                            </h3>

                            {/* Live interim transcript */}
                            {isRecording && liveTranscript && (
                                <div className="mb-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-xl">
                                    <p className="text-sm text-blue-600 mb-1">à¸à¸³à¸¥à¸±à¸‡à¸Ÿà¸±à¸‡:</p>
                                    <p className="text-gray-700 italic">{liveTranscript}</p>
                                </div>
                            )}

                            {/* Final transcript segments */}
                            {transcript.length > 0 ? (
                                <div className="space-y-2 max-h-96 overflow-y-auto">
                                    {transcript.map((seg, idx) => (
                                        <div key={idx} className="p-3 bg-purple-50 rounded-lg border-l-4 border-purple-600">
                                            <div className="flex justify-between items-start mb-1">
                                                <span className="text-xs text-gray-500">
                                                    {seg.startTime?.toFixed(1)}s - {seg.endTime?.toFixed(1)}s
                                                </span>
                                            </div>
                                            <p className="text-gray-800">{seg.text}</p>
                                        </div>
                                    ))}
                                </div>
                            ) : (
                                !isRecording && (
                                    <div className="text-center py-8 text-gray-400">
                                        <p>à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µ transcript</p>
                                        <p className="text-sm mt-2">
                                            {navigator.userAgent.includes('Chrome') || navigator.userAgent.includes('Edge')
                                                ? 'à¹€à¸£à¸´à¹ˆà¸¡à¸šà¸±à¸™à¸—à¸¶à¸à¹€à¸žà¸·à¹ˆà¸­à¸”à¸¹ transcript à¹à¸šà¸š real-time'
                                                : 'âš ï¸ à¸šà¸£à¸²à¸§à¹€à¸‹à¸­à¸£à¹Œà¸™à¸µà¹‰à¸­à¸²à¸ˆà¹„à¸¡à¹ˆà¸£à¸­à¸‡à¸£à¸±à¸š Speech Recognition (à¹ƒà¸Šà¹‰ Chrome/Edge à¹à¸—à¸™)'}
                                        </p>
                                    </div>
                                )
                            )}
                        </div>
                    )}

                    {/* AI Feedback */}
                    {isAnalyzing && (
                        <div className="glass-effect rounded-3xl p-8 shadow-2xl text-center">
                            <div className="text-4xl mb-4">ðŸ¤–</div>
                            <p className="text-lg font-semibold text-purple-600">AI à¸à¸³à¸¥à¸±à¸‡à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œ...</p>
                        </div>
                    )}

                    {aiFeedback && (
                        <div className="glass-effect rounded-3xl p-8 shadow-2xl">
                            <h3 className="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                                <span>ðŸ¤–</span> AI Feedback
                            </h3>

                            {/* Scores */}
                            <div className="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6">
                                <div className="bg-purple-50 p-4 rounded-xl text-center">
                                    <div className="text-2xl font-bold text-purple-600">{aiFeedback.scores.fluency}</div>
                                    <div className="text-xs text-gray-600">Fluency</div>
                                </div>
                                <div className="bg-pink-50 p-4 rounded-xl text-center">
                                    <div className="text-2xl font-bold text-pink-600">{aiFeedback.scores.clarity}</div>
                                    <div className="text-xs text-gray-600">Clarity</div>
                                </div>
                                <div className="bg-indigo-50 p-4 rounded-xl text-center">
                                    <div className="text-2xl font-bold text-indigo-600">{aiFeedback.scores.structure}</div>
                                    <div className="text-xs text-gray-600">Structure</div>
                                </div>
                                <div className="bg-green-50 p-4 rounded-xl text-center">
                                    <div className="text-2xl font-bold text-green-600">{aiFeedback.scores.engagement}</div>
                                    <div className="text-xs text-gray-600">Engagement</div>
                                </div>
                                <div className="bg-gradient-to-br from-purple-50 to-pink-50 p-4 rounded-xl text-center border-2 border-purple-300">
                                    <div className="text-3xl font-bold text-purple-600">{aiFeedback.scores.overall}</div>
                                    <div className="text-xs text-gray-600 font-semibold">Overall</div>
                                </div>
                            </div>

                            {/* Strengths & Improvements */}
                            <div className="grid md:grid-cols-2 gap-4 mb-6">
                                <div>
                                    <h4 className="font-semibold text-green-600 mb-2">âœ… à¸ˆà¸¸à¸”à¹à¸‚à¹‡à¸‡:</h4>
                                    <ul className="space-y-2">
                                        {aiFeedback.strengths.map((s, i) => (
                                            <li key={i} className="text-sm bg-green-50 p-3 rounded-lg">{s}</li>
                                        ))}
                                    </ul>
                                </div>
                                <div>
                                    <h4 className="font-semibold text-orange-600 mb-2">âš ï¸ à¸„à¸§à¸£à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡:</h4>
                                    <ul className="space-y-2">
                                        {aiFeedback.improvements.map((i, idx) => (
                                            <li key={idx} className="text-sm bg-orange-50 p-3 rounded-lg">{i}</li>
                                        ))}
                                    </ul>
                                </div>
                            </div>

                            {/* Next Steps */}
                            <div className="bg-blue-50 p-4 rounded-xl">
                                <h4 className="font-semibold text-blue-600 mb-2">ðŸŽ¯ à¸„à¸³à¹à¸™à¸°à¸™à¸³à¸•à¹ˆà¸­à¹„à¸›:</h4>
                                <p className="text-sm text-gray-700">{aiFeedback.nextSteps}</p>
                            </div>

                            {/* Cognitive Patterns (NEW) */}
                            {aiFeedback.cognitivePatterns && (
                                <div className="mt-6 bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-xl border-2 border-purple-200">
                                    <h4 className="font-bold text-purple-700 mb-4 flex items-center gap-2">
                                        <span>ðŸ§ </span> Cognitive Patterns (à¸£à¸¹à¸›à¹à¸šà¸šà¸à¸²à¸£à¸„à¸´à¸”)
                                    </h4>
                                    <div className="grid md:grid-cols-3 gap-4 mb-4">
                                        <div className="bg-white p-3 rounded-lg">
                                            <p className="text-xs text-gray-500 mb-1">Thinking Style:</p>
                                            <p className="font-semibold text-purple-600">{aiFeedback.cognitivePatterns.thinkingStyle}</p>
                                        </div>
                                        <div className="bg-white p-3 rounded-lg">
                                            <p className="text-xs text-gray-500 mb-1">Scope Control:</p>
                                            <p className="font-semibold text-pink-600">{aiFeedback.cognitivePatterns.scopeControl}</p>
                                        </div>
                                        <div className="bg-white p-3 rounded-lg">
                                            <p className="text-xs text-gray-500 mb-1">Preparedness:</p>
                                            <p className="font-semibold text-indigo-600">{aiFeedback.cognitivePatterns.preparedness}</p>
                                        </div>
                                    </div>
                                    {aiFeedback.cognitivePatterns.issues && aiFeedback.cognitivePatterns.issues.length > 0 && (
                                        <div className="bg-red-50 p-3 rounded-lg border-l-4 border-red-400">
                                            <p className="text-sm font-semibold text-red-700 mb-2">âš ï¸ à¸›à¸±à¸à¸«à¸²à¸—à¸µà¹ˆà¸žà¸š:</p>
                                            <ul className="space-y-1">
                                                {aiFeedback.cognitivePatterns.issues.map((issue, i) => (
                                                    <li key={i} className="text-sm text-gray-700">â€¢ {issue}</li>
                                                ))}
                                            </ul>
                                        </div>
                                    )}
                                </div>
                            )}

                            {/* Root Cause Analysis (NEW) */}
                            {aiFeedback.rootCause && (
                                <div className="mt-4 bg-gradient-to-r from-orange-50 to-yellow-50 p-6 rounded-xl border-2 border-orange-200">
                                    <h4 className="font-bold text-orange-700 mb-3 flex items-center gap-2">
                                        <span>ðŸ’¡</span> Root Cause Analysis (à¸—à¸³à¹„à¸¡à¸–à¸¶à¸‡à¸žà¸¹à¸”à¹à¸šà¸šà¸™à¸±à¹‰à¸™)
                                    </h4>
                                    <div className="space-y-3">
                                        <div className="bg-white p-3 rounded-lg">
                                            <p className="text-xs text-gray-500 mb-1">à¸›à¸±à¸à¸«à¸²à¸«à¸¥à¸±à¸:</p>
                                            <p className="font-semibold text-orange-600">{aiFeedback.rootCause.primaryIssue}</p>
                                        </div>
                                        <div className="bg-white p-3 rounded-lg">
                                            <p className="text-xs text-gray-500 mb-1">à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢:</p>
                                            <p className="text-sm text-gray-700">{aiFeedback.rootCause.whyYouSpokeThatWay}</p>
                                        </div>
                                        {aiFeedback.rootCause.deepInsights && aiFeedback.rootCause.deepInsights.length > 0 && (
                                            <div className="bg-white p-3 rounded-lg">
                                                <p className="text-xs text-gray-500 mb-2">ðŸ’Ž Deep Insights:</p>
                                                <ul className="space-y-1">
                                                    {aiFeedback.rootCause.deepInsights.map((insight, i) => (
                                                        <li key={i} className="text-sm text-gray-700">â€¢ {insight}</li>
                                                    ))}
                                                </ul>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            )}
                        </div>
                    )}

                    {/* Complete Form */}
                    {showCompleteForm && (
                        <div className="glass-effect rounded-3xl p-8 shadow-2xl">
                            <h3 className="text-2xl font-bold text-gray-800 mb-6">
                                {aiFeedback ? 'âœ¨ AI à¹ƒà¸«à¹‰à¸„à¸°à¹à¸™à¸™à¹à¸¥à¹‰à¸§!' : 'à¸›à¸£à¸°à¹€à¸¡à¸´à¸™à¸œà¸¥à¸à¸²à¸£à¸à¸¶à¸'}
                            </h3>

                            {!aiFeedback && (
                                <div className="mb-6">
                                    <label className="block text-gray-700 font-semibold mb-2">
                                        à¸„à¸°à¹à¸™à¸™à¸žà¸¶à¸‡à¸žà¸­à¹ƒà¸ˆ (1-10)
                                    </label>
                                    <input
                                        type="range"
                                        min="1"
                                        max="10"
                                        value={score}
                                        onChange={(e) => setScore(parseInt(e.target.value))}
                                        className="w-full h-3 bg-purple-200 rounded-lg appearance-none cursor-pointer"
                                    />
                                    <div className="text-center mt-2">
                                        <span className="text-4xl font-bold text-purple-600">{score}/10</span>
                                    </div>
                                </div>
                            )}

                            <div className="mb-6">
                                <label className="block text-gray-700 font-semibold mb-2">
                                    à¸šà¸±à¸™à¸—à¸¶à¸ / à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰
                                </label>
                                <textarea
                                    value={notes}
                                    onChange={(e) => setNotes(e.target.value)}
                                    placeholder="à¹€à¸Šà¹ˆà¸™: à¸§à¸±à¸™à¸™à¸µà¹‰à¸žà¸¹à¸”à¸„à¸¥à¹ˆà¸­à¸‡à¸‚à¸¶à¹‰à¸™, Dead Air à¸™à¹‰à¸­à¸¢à¸¥à¸‡..."
                                    className="w-full px-4 py-3 border-2 border-purple-200 rounded-xl focus:border-purple-500 focus:outline-none"
                                    rows="4"
                                />
                            </div>

                            <button
                                onClick={handleSubmitSession}
                                className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-xl font-bold text-lg hover:shadow-2xl transition transform hover:scale-105"
                            >
                                ðŸ’¾ à¸šà¸±à¸™à¸—à¸¶à¸à¹à¸¥à¸°à¹„à¸›à¸•à¹ˆà¸­
                            </button>
                        </div>
                    )}
                </div>
            );
        }

        // Power Words View (same as before)
        function PowerWordsView({ currentDay, powerWordData, weekData }) {
            return (
                <div className="glass-effect rounded-3xl p-8 shadow-2xl">
                    <h2 className="text-2xl font-bold text-gray-800 mb-4">
                        ðŸ“š Power Words - Day {currentDay}
                    </h2>
                    <div className="grid gap-4">
                        {powerWordData && powerWordData.words.map((word, idx) => (
                            <div key={idx} className="bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-xl border-2 border-purple-200">
                                <h3 className="text-2xl font-bold text-purple-600 mb-2">{word.word}</h3>
                                <p className="text-gray-700 mb-3">{word.meaning}</p>
                                <div className="bg-white p-3 rounded-lg border-l-4 border-purple-600">
                                    <span className="text-sm text-gray-500">à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡:</span>
                                    <p className="text-gray-800 italic">"{word.example}"</p>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        // Progress View with Export/Import
        function ProgressView({ sessions, currentDay, resetProgress, exportToJSON, importFromJSON, achievements }) {
            const last7Days = sessions.slice(-7);
            const averageScore = sessions.length > 0
                ? (sessions.reduce((a, b) => a + b.score, 0) / sessions.length).toFixed(1)
                : 0;

            return (
                <div className="space-y-6">
                    <div className="glass-effect rounded-3xl p-8 shadow-2xl">
                        <h2 className="text-2xl font-bold text-gray-800 mb-6">ðŸ“ˆ à¸ªà¸–à¸´à¸•à¸´à¹‚à¸”à¸¢à¸£à¸§à¸¡</h2>

                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                            <div className="bg-purple-50 p-4 rounded-xl text-center">
                                <div className="text-3xl font-bold text-purple-600">{sessions.length}</div>
                                <div className="text-sm text-gray-600">à¹€à¸‹à¸ªà¸Šà¸±à¸™</div>
                            </div>
                            <div className="bg-pink-50 p-4 rounded-xl text-center">
                                <div className="text-3xl font-bold text-pink-600">{averageScore}</div>
                                <div className="text-sm text-gray-600">à¸„à¸°à¹à¸™à¸™à¹€à¸‰à¸¥à¸µà¹ˆà¸¢</div>
                            </div>
                            <div className="bg-indigo-50 p-4 rounded-xl text-center">
                                <div className="text-3xl font-bold text-indigo-600">
                                    {Math.floor(sessions.reduce((a, b) => a + b.duration, 0) / 60)}
                                </div>
                                <div className="text-sm text-gray-600">à¸™à¸²à¸—à¸µà¸£à¸§à¸¡</div>
                            </div>
                            <div className="bg-green-50 p-4 rounded-xl text-center">
                                <div className="text-3xl font-bold text-green-600">{calculateStreak(sessions)}</div>
                                <div className="text-sm text-gray-600">Streak ðŸ”¥</div>
                            </div>
                        </div>

                        {/* Chart */}
                        {last7Days.length > 0 && (
                            <div>
                                <h3 className="font-semibold text-gray-700 mb-3">à¸„à¸°à¹à¸™à¸™ 7 à¸§à¸±à¸™à¸¥à¹ˆà¸²à¸ªà¸¸à¸”</h3>
                                <div className="flex items-end gap-2 h-40">
                                    {last7Days.map((session, idx) => (
                                        <div key={idx} className="flex-1 flex flex-col items-center gap-2">
                                            <div
                                                className="w-full bg-gradient-to-t from-purple-600 to-pink-500 rounded-t-lg"
                                                style={{ height: `${(session.score / 10) * 100}%` }}
                                            ></div>
                                            <div className="text-xs text-gray-600">D{session.day}</div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                    </div>

                    {/* Data Management */}
                    <div className="glass-effect rounded-3xl p-8 shadow-2xl">
                        <h3 className="text-xl font-bold text-gray-800 mb-4">ðŸ’¾ à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥</h3>
                        <div className="flex gap-4 flex-wrap">
                            <button
                                onClick={exportToJSON}
                                className="bg-blue-500 text-white px-6 py-3 rounded-xl font-semibold hover:bg-blue-600 transition"
                            >
                                ðŸ“¥ Export à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (JSON)
                            </button>
                            <label className="bg-green-500 text-white px-6 py-3 rounded-xl font-semibold hover:bg-green-600 transition cursor-pointer">
                                ðŸ“¤ Import à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
                                <input
                                    type="file"
                                    accept=".json"
                                    onChange={importFromJSON}
                                    className="hidden"
                                />
                            </label>
                            <button
                                onClick={resetProgress}
                                className="bg-red-500 text-white px-6 py-3 rounded-xl font-semibold hover:bg-red-600 transition"
                            >
                                ðŸ”„ à¸£à¸µà¹€à¸‹à¹‡à¸•
                            </button>
                        </div>
                    </div>

                    {/* Session History */}
                    <div className="glass-effect rounded-3xl p-8 shadow-2xl">
                        <h3 className="text-xl font-bold text-gray-800 mb-4">ðŸ“ à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¸à¸¶à¸</h3>
                        {sessions.length === 0 ? (
                            <p className="text-gray-500 text-center py-8">à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸›à¸£à¸°à¸§à¸±à¸•à¸´</p>
                        ) : (
                            <div className="space-y-3 max-h-96 overflow-y-auto">
                                {[...sessions].reverse().map((session, idx) => (
                                    <div key={idx} className="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-600">
                                        <div className="flex justify-between items-start mb-2">
                                            <div>
                                                <span className="font-semibold text-purple-600">Day {session.day}</span>
                                                {session.aiFeedback && (
                                                    <span className="ml-2 text-xs bg-purple-200 text-purple-700 px-2 py-1 rounded-full">
                                                        âœ¨ AI
                                                    </span>
                                                )}
                                            </div>
                                            <div className="text-right">
                                                <div className="font-bold text-purple-600">{session.score.toFixed(1)}/10</div>
                                                <div className="text-xs text-gray-500">{Math.floor(session.duration / 60)} à¸™à¸²à¸—à¸µ</div>
                                            </div>
                                        </div>
                                        {session.notes && (
                                            <p className="text-sm text-gray-700 italic mb-2">"{session.notes}"</p>
                                        )}
                                        {session.aiFeedback && (
                                            <div className="text-xs text-gray-600 bg-white p-2 rounded">
                                                <strong>AI:</strong> {session.aiFeedback.nextSteps}
                                            </div>
                                        )}
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // Settings View
        function SettingsView({ apiKey, setApiKey }) {
            const [tempKey, setTempKey] = useState(apiKey);

            // Sync tempKey with apiKey when it changes from external sources
            useEffect(() => {
                setTempKey(apiKey);
            }, [apiKey]);

            function handleSave() {
                const trimmedKey = tempKey.trim();
                setApiKey(trimmedKey);
                console.log('ðŸ’¾ Saved API Key:', trimmedKey.substring(0, 10) + '...');
                alert('à¸šà¸±à¸™à¸—à¸¶à¸ API Key à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!');
            }

            return (
                <div className="glass-effect rounded-3xl p-8 shadow-2xl">
                    <h2 className="text-2xl font-bold text-gray-800 mb-6">âš™ï¸ à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²</h2>

                    <div className="mb-6">
                        <label className="block text-gray-700 font-semibold mb-2">
                            ðŸ”‘ Gemini API Key
                        </label>
                        <input
                            type="password"
                            value={tempKey}
                            onChange={(e) => setTempKey(e.target.value)}
                            placeholder="AIzaSy..."
                            className="w-full px-4 py-3 border-2 border-purple-200 rounded-xl focus:border-purple-500 focus:outline-none mb-2"
                        />
                        <p className="text-sm text-gray-500 mb-4">
                            à¹„à¸”à¹‰à¸Ÿà¸£à¸µà¸—à¸µà¹ˆ: <a href="https://aistudio.google.com/app/apikey" target="_blank" className="text-purple-600 underline">aistudio.google.com</a>
                        </p>
                        <button
                            onClick={handleSave}
                            className="bg-purple-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-purple-700 transition"
                        >
                            ðŸ’¾ à¸šà¸±à¸™à¸—à¸¶à¸
                        </button>
                    </div>

                    <div className="bg-blue-50 p-4 rounded-xl">
                        <h4 className="font-semibold text-blue-600 mb-2">ðŸ’¡ à¸—à¸³à¹„à¸¡à¸•à¹‰à¸­à¸‡à¹ƒà¸ªà¹ˆ API Key?</h4>
                        <ul className="text-sm text-gray-700 space-y-1">
                            <li>âœ… à¸£à¸±à¸š AI Feedback à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´</li>
                            <li>âœ… à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸à¸²à¸£à¸žà¸¹à¸”à¹à¸šà¸šà¸¥à¸°à¹€à¸­à¸µà¸¢à¸”</li>
                            <li>âœ… à¸„à¸°à¹à¸™à¸™à¸—à¸µà¹ˆà¹à¸¡à¹ˆà¸™à¸¢à¸³à¸à¸§à¹ˆà¸²</li>
                            <li>âœ… à¸„à¸³à¹à¸™à¸°à¸™à¸³à¹€à¸‰à¸žà¸²à¸°à¸šà¸¸à¸„à¸„à¸¥</li>
                        </ul>
                    </div>

                    <div className="mt-6 bg-yellow-50 p-4 rounded-xl">
                        <h4 className="font-semibold text-yellow-600 mb-2">âš ï¸ à¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢</h4>
                        <p className="text-sm text-gray-700">
                            API Key à¹€à¸à¹‡à¸šà¹ƒà¸™ browser à¸‚à¸­à¸‡à¸„à¸¸à¸“à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™ à¹„à¸¡à¹ˆà¸ªà¹ˆà¸‡à¹„à¸›à¸—à¸µà¹ˆà¹„à¸«à¸™ à¸™à¸­à¸à¸ˆà¸²à¸ Google AI
                        </p>
                    </div>
                </div>
            );
        }

        // Helper
        function calculateStreak(sessions) {
            if (sessions.length === 0) return 0;

            const today = new Date();
            today.setHours(0, 0, 0, 0);

            let streak = 0;
            let checkDate = new Date(today);

            for (let i = sessions.length - 1; i >= 0; i--) {
                const sessionDate = new Date(sessions[i].date);
                sessionDate.setHours(0, 0, 0, 0);

                if (sessionDate.getTime() === checkDate.getTime()) {
                    streak++;
                    checkDate.setDate(checkDate.getDate() - 1);
                } else if (sessionDate.getTime() < checkDate.getTime()) {
                    break;
                }
            }

            return streak;
        }

        // Render
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</body>

</html>